# ูุธุงู ูุณุงุญุฉ ุนูู ุงูููุธููู - Employee Workspace System
## ุฏููู ุดุงูู ููุชูููุฐ ูุงูุงุณุชุฎุฏุงู

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 28 ููุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ:** 1.1.0  
**ุงูุญุงูุฉ:** โ ุชู ุงูุชูููุฐ (MVP + Phase 2)

---

## ๐ ุฌุฏูู ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ุงูุจููุฉ ุงูุชุญุชูุฉ](#ุงูุจููุฉ-ุงูุชุญุชูุฉ)
3. [ุงูููููุงุช ุงูุฑุฆูุณูุฉ](#ุงูููููุงุช-ุงูุฑุฆูุณูุฉ)
4. [ุฏููู ุงูุงุณุชุฎุฏุงู](#ุฏููู-ุงูุงุณุชุฎุฏุงู)
5. [ุงูููุฒุงุช ุงููุชูุฏูุฉ](#ุงูููุฒุงุช-ุงููุชูุฏูุฉ)
6. [ุงูุฎุทูุงุช ุงูุชุงููุฉ](#ุงูุฎุทูุงุช-ุงูุชุงููุฉ)

---

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

### ุงููุฏู
ุฅูุดุงุก ูุธุงู ูุชูุงูู ูุชูุฒูุน ุงูุนููุฏ ุนูู ุงูููุธููู ูุชุชุจุน ุฃุฏุงุฆูู ูุน ุงูุญูุงุธ ุนูู Dashboard ุงูุญุงูู.

### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ
- โ ุชูุฒูุน ุงูุนููุฏ ุนูู ุงูููุธููู
- โ ููุญุฉ ุชุญูู ุฎุงุตุฉ ููู ููุธู
- โ ุชุชุจุน ุงูููุงู ูุงููุชุงุจุนุงุช
- โ ุญุณุงุจ ุงูุฃุฏุงุก ุชููุงุฆูุงู
- โ ุชูุจููุงุช ููุนููุฏ ุงูุชู ุชุญุชุงุฌ ูุชุงุจุนุฉ
- โ ุณุฌู ุงููุดุงุท ูุงูุชูุงุตู
- โ ุชูุงูู ุณูุณ ูุน Dashboard ุงูุญุงูู

---

## ๐๏ธ ุงูุจููุฉ ุงูุชุญุชูุฉ

### 1. Database Schema

#### ุฃ. ุฅุถุงูุงุช ุนูู ุฌุฏูู `contracts`
```sql
ALTER TABLE contracts ADD COLUMN:
- assigned_to_profile_id UUID    -- ุงูููุธู ุงููุณุคูู
- assigned_at TIMESTAMPTZ         -- ุชุงุฑูุฎ ุงูุชุนููู
- assigned_by_profile_id UUID     -- ูู ูุงู ุจุงูุชุนููู
- assignment_notes TEXT           -- ููุงุญุธุงุช ุงูุชุนููู
```

#### ุจ. ุฅุถุงูุงุช ุนูู ุฌุฏูู `customer_communications`
```sql
ALTER TABLE customer_communications ADD COLUMN:
- contract_id UUID                -- ุฑุจุท ุงูุชูุงุตู ุจุงูุนูุฏ
```

#### ุฌ. ุฌุฏูู `followup_policies` (ุฌุฏูุฏ)
```sql
CREATE TABLE followup_policies (
  id UUID PRIMARY KEY,
  company_id UUID,
  policy_name TEXT,
  trigger_type TEXT,              -- overdue_payment, contract_expiring, etc.
  days_before_or_after INT,
  followup_type TEXT,
  auto_assign BOOLEAN,
  is_active BOOLEAN
);
```

#### ุฏ. ุฌุฏูู `employee_collection_targets` (ุฌุฏูุฏ)
```sql
CREATE TABLE employee_collection_targets (
  id UUID PRIMARY KEY,
  employee_id UUID,
  period_start DATE,
  period_end DATE,
  target_collection_amount DECIMAL,
  target_collection_rate DECIMAL,
  target_followups_count INT
);
```

#### ูู. View `employee_performance_view` (ุฌุฏูุฏ)
```sql
CREATE VIEW employee_performance_view AS
-- ุญุณุงุจ ุฏููุงูููู ูุฃุฏุงุก ุงูููุธููู ุจูุงุกู ุนูู:
-- - ูุณุจุฉ ุงูุชุญุตูู (35%)
-- - ุฅูุฌุงุฒ ุงูููุงู (25%)
-- - ุชุบุทูุฉ ุงููุชุงุจุนุงุช (20%)
-- - ูุณุชูู ุงููุดุงุท (20%)
```

---

## ๐งฉ ุงูููููุงุช ุงูุฑุฆูุณูุฉ

### 1. ุงูุตูุญุงุช (Pages)

#### `/employee-workspace` - ุตูุญุฉ ูุณุงุญุฉ ุนูู ุงูููุธู
**ุงููููุน:** `src/pages/EmployeeWorkspace.tsx`

**ุงูููููุงุช:**
- `EmployeeQuickStats` - ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ
- `EmployeePriorityContracts` - ุนููุฏ ุชุญุชุงุฌ ูุชุงุจุนุฉ
- `EmployeeTodayTasks` - ููุงู ุงูููู
- `EmployeeContractsList` - ูุงุฆูุฉ ุงูุนููุฏ
- `EmployeePerformanceCard` - ุจุทุงูุฉ ุงูุฃุฏุงุก
- `EmployeeActivityLog` - ุณุฌู ุงููุดุงุท
- `QuickActionButtons` - ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ

---

### 2. ุงูู Hooks

#### `useEmployeeContracts`
**ุงููููุน:** `src/hooks/useEmployeeContracts.tsx`

**ุงููุธููุฉ:**
- ุฌูุจ ุงูุนููุฏ ุงููุนูููุฉ ููููุธู
- ุญุณุงุจ ุงูุนููุฏ ุฐุงุช ุงูุฃููููุฉ
- ููุชุฑุฉ ูุจุญุซ ูู ุงูุนููุฏ

**ุงูุงุณุชุฎุฏุงู:**
```typescript
const {
  contracts,
  priorityContracts,
  stats,
  isLoading,
  refetch
} = useEmployeeContracts({ filters });
```

#### `useEmployeeTasks`
**ุงููููุน:** `src/hooks/useEmployeeTasks.tsx`

**ุงููุธููุฉ:**
- ุฌูุจ ููุงู ุงูููุธู
- ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูููุงู (ุฅููุงูุ ุชุฃุฌููุ ุฅูุบุงุก)
- ุญุณุงุจ ุฅุญุตุงุฆูุงุช ุงูููุงู

**ุงูุงุณุชุฎุฏุงู:**
```typescript
const {
  tasks,
  todayTasks,
  overdueTasks,
  stats,
  completeTask,
  rescheduleTask
} = useEmployeeTasks();
```

#### `useEmployeePerformance`
**ุงููููุน:** `src/hooks/useEmployeePerformance.tsx`

**ุงููุธููุฉ:**
- ุฌูุจ ุจูุงูุงุช ุงูุฃุฏุงุก ูู View
- ุญุณุงุจ ุงูุชูุฏู ูุญู ุงูุฃูุฏุงู
- ุชุญููู ูุคุดุฑุงุช ุงูุฃุฏุงุก

**ุงูุงุณุชุฎุฏุงู:**
```typescript
const {
  performance,
  performanceGrade,
  targetProgress,
  metricsBreakdown
} = useEmployeePerformance();
```

---

### 3. Types & Interfaces

**ุงููููุน:** `src/types/employee-workspace.types.ts`

**ุงูุฃููุงุน ุงูุฑุฆูุณูุฉ:**
```typescript
// ุฃุฏุงุก ุงูููุธู
interface EmployeePerformance {
  employee_id: string;
  collection_rate: number;
  performance_score: number;
  // ... ุงููุฒูุฏ
}

// ุนูุฏ ุฐู ุฃููููุฉ
interface PriorityContract {
  id: string;
  priority: 'critical' | 'high' | 'medium' | 'low';
  priority_reason: string;
  balance_due: number;
  // ... ุงููุฒูุฏ
}

// ูููุฉ ุงูููุธู
interface EmployeeTask {
  id: string;
  type: string;
  status: string;
  scheduled_date: string;
  // ... ุงููุฒูุฏ
}
```

---

## ๐ ุฏููู ุงูุงุณุชุฎุฏุงู

### ููููุธููู

#### 1. ุงููุตูู ุฅูู ูุณุงุญุฉ ุงูุนูู

**ูู Dashboard ุงูุฑุฆูุณู:**
1. ุงูุชุญ Dashboard
2. ุณุชุฌุฏ Widget "๐ผ ูุณุงุญุฉ ุนููู" ูู ุงูุฃุณูู (ุฅุฐุง ูุงู ูุฏูู ุนููุฏ ูุนูููุฉ)
3. ุงุถุบุท ุนูู "ุงูุชูู ุฅูู ูุณุงุญุฉ ุนููู"

**ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ:**
- ุงุจุญุซ ุนู "๐ค ูุณุงุญุฉ ุนููู" ูู ุงููุงุฆูุฉ

**ุงูุฑุงุจุท ุงููุจุงุดุฑ:**
```
/employee-workspace
```

#### 2. ุงุณุชุฎุฏุงู ููุญุฉ ุงูุชุญูู

**ุงูุฅุญุตุงุฆูุงุช ุงูุณุฑูุนุฉ:**
- ุนุฏุฏ ุงูุนููุฏ ุงููุนูููุฉ
- ุงููุจุงูุบ ุงููุณุชุญูุฉ
- ุงูููุงู ุงูููููุฉ
- ููุงุท ุงูุฃุฏุงุก

**ุงูุนููุฏ ุฐุงุช ุงูุฃููููุฉ:**
- ๐ด ุญุฑุฌุฉ (Critical): ูุชุฃุฎุฑุฉ ุฃูุซุฑ ูู 30 ููู
- ๐ ุนุงููุฉ (High): ูุชุฃุฎุฑุฉ 7-30 ููู ุฃู ุชูุชูู ุฎูุงู 3 ุฃูุงู
- ๐ก ูุชูุณุทุฉ (Medium): ูู ูุชู ุงูุชูุงุตู ููุฐ 14 ููู
- ๐ข ููุฎูุถุฉ (Low): ุฏูุนุฉ ูุณุชุญูุฉ ุงูููู

**ุงูููุงู ุงูููููุฉ:**
- โ ููุฏ ุงูุงูุชุธุงุฑ
- โณ ุฌุงุฑู ุงูุชูููุฐ
- โ ููุชููุฉ
- โ๏ธ ูุชุฃุฎุฑุฉ

#### 3. ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ

**ุงูุฃุฒุฑุงุฑ ุงููุชุงุญุฉ:**
- ๐ ุชุณุฌูู ููุงููุฉ
- ๐ฐ ุชุณุฌูู ุฏูุนุฉ
- ๐ ุฅุถุงูุฉ ููุงุญุธุฉ
- ๐ ุฌุฏููุฉ ูุชุงุจุนุฉ
- ๐ ุชุณุฌูู ูุฎุงููุฉ
- ๐ ุทูุจ ุชุฌุฏูุฏ

---

### ููุฅุฏุงุฑุฉ

#### 1. ุชุนููู ุงูุนููุฏ ููููุธููู

**ุงูุทุฑููุฉ ุงูุญุงููุฉ (ูุฏููุงู):**
```sql
UPDATE contracts 
SET 
  assigned_to_profile_id = 'EMPLOYEE_PROFILE_ID',
  assigned_at = NOW(),
  assigned_by_profile_id = 'ADMIN_PROFILE_ID'
WHERE id = 'CONTRACT_ID';
```

**ูุฑูุจุงู:** ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงููุฑูู (Team Management)

#### 2. ูุฑุงูุจุฉ ุงูุฃุฏุงุก

**ุนุฑุถ ุฃุฏุงุก ููุธู ูุนูู:**
```sql
SELECT * FROM employee_performance_view 
WHERE employee_id = 'EMPLOYEE_PROFILE_ID';
```

**ูุคุดุฑุงุช ุงูุฃุฏุงุก:**
- **ูุณุจุฉ ุงูุชุญุตูู** (35%): ุงููุญุตูู รท ุงููุณุชุญู
- **ุฅูุฌุงุฒ ุงูููุงู** (25%): ุงูููุงู ุงูููุชููุฉ รท ุฅุฌูุงูู ุงูููุงู
- **ุชุบุทูุฉ ุงููุชุงุจุนุงุช** (20%): ุงูุนููุฏ ุงููุชุงุจูุนุฉ รท ุฅุฌูุงูู ุงูุนููุฏ
- **ูุณุชูู ุงููุดุงุท** (20%): ุนุฏุฏ ุงูุชูุงุตูุงุช ูุงููุชุงุจุนุงุช

**ุงูุชููููุงุช:**
- A (90-100): ููุชุงุฒ
- B (75-89): ุฌูุฏ
- C (60-74): ูุชูุณุท
- D (40-59): ุฃูู ูู ุงููุชูุณุท
- F (0-39): ุถุนูู

#### 3. ุชุญุฏูุฏ ุงูุฃูุฏุงู

```sql
INSERT INTO employee_collection_targets (
  employee_id,
  period_start,
  period_end,
  target_collection_amount,
  target_collection_rate,
  target_followups_count
) VALUES (
  'EMPLOYEE_ID',
  '2026-02-01',
  '2026-02-28',
  100000,  -- 100,000 ุฑูุงู
  85,      -- 85%
  50       -- 50 ูุชุงุจุนุฉ
);
```

---

## ๐ ุงูููุฒุงุช ุงููุชูุฏูุฉ

### 1. ุณูุงุณุงุช ุงููุชุงุจุนุฉ ุงูุชููุงุฆูุฉ

**ุฅูุดุงุก ุณูุงุณุฉ:**
```sql
INSERT INTO followup_policies (
  company_id,
  policy_name,
  policy_name_ar,
  trigger_type,
  days_before_or_after,
  followup_type,
  auto_assign,
  is_active
) VALUES (
  'COMPANY_ID',
  'Overdue Payment Follow-up',
  'ูุชุงุจุนุฉ ุงูุฏูุนุงุช ุงููุชุฃุฎุฑุฉ',
  'overdue_payment',
  3,  -- ุจุนุฏ 3 ุฃูุงู ูู ุงูุชุฃุฎูุฑ
  'payment_collection',
  true,
  true
);
```

**ุฃููุงุน ุงููุญูุฒุงุช:**
- `overdue_payment` - ุนูุฏ ุชุฃุฎุฑ ุงูุณุฏุงุฏ
- `contract_expiring` - ูุจู ุงูุชูุงุก ุงูุนูุฏ
- `new_violation` - ุนูุฏ ูุฎุงููุฉ ุฌุฏูุฏุฉ
- `periodic` - ุฏูุฑู (ูู X ููู)
- `no_contact` - ุนุฏู ุงูุชูุงุตู ููุชุฑุฉ ูุนููุฉ

### 2. ุงูุชูุฒูุน ุงูุชููุงุฆู ููุนููุฏ

**ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ:**
```sql
SELECT auto_assign_contract_to_employee(
  'CONTRACT_ID',
  'COMPANY_ID'
);
```

**ุงูุขููุฉ:**
- ุชุจุญุซ ุนู ุงูููุธู ุงูุฃูู ุนุจุฆุงู (ุฃูู ุนุฏุฏ ุนููุฏ)
- ุชุนููู ุงูุนูุฏ ุชููุงุฆูุงู
- ุชุฑุฌุน ID ุงูููุธู ุงููุนููู

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูุฃุฏุงุก

### ูุซุงู ุนูู ุจูุงูุงุช ุงูุฃุฏุงุก

```json
{
  "employee_id": "xxx",
  "assigned_contracts_count": 45,
  "active_contracts_count": 38,
  "collection_rate": 87.5,
  "total_collected": 108750,
  "total_balance_due": 16250,
  "completed_followups": 147,
  "total_followups": 150,
  "followup_completion_rate": 98,
  "total_communications": 89,
  "contact_coverage_rate": 92,
  "performance_score": 91.2,
  "grade": "A"
}
```

---

## ๐ ุงูุชูุงูู ูุน Dashboard ุงูุญุงูู

### Widget ูู Dashboard

**ุงููููุน:** `src/components/dashboard/EmployeeWorkspaceWidget.tsx`

**ูุธูุฑ ุนูุฏูุง:**
- ุงููุณุชุฎุฏู ูุฏูู ุนููุฏ ูุนูููุฉ ูู
- `assigned_to_profile_id` ููุณ null

**ุงููุญุชูู:**
- ุนุฏุฏ ุงูุนููุฏ ุงููุนูููุฉ
- ุนุฏุฏ ุงูุนููุฏ ุงูุชู ุชุญุชุงุฌ ูุชุงุจุนุฉ
- ุนุฏุฏ ุงูููุงู ุงูููู
- ุฒุฑ "ุงูุชูู ุฅูู ูุณุงุญุฉ ุนููู"

---

## ๐จ ุงูุชุตููู ูุงูู UX

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ

**ุญุณุจ ุงูุฃููููุฉ:**
- ๐ด Critical: `red-100/red-800`
- ๐ High: `orange-100/orange-800`
- ๐ก Medium: `yellow-100/yellow-800`
- ๐ข Low: `blue-100/blue-800`

**ุญุณุจ ุงูุญุงูุฉ:**
- Pending: `blue-100/blue-800`
- In Progress: `yellow-100/yellow-800`
- Completed: `green-100/green-800`
- Overdue: `red-100/red-800`

### ุงูุฃููููุงุช

- ๐ผ ูุณุงุญุฉ ุงูุนูู
- ๐ ุงูุนููุฏ
- ๐ ุงูููุงู
- ๐ ุงูููุงููุงุช
- ๐ฐ ุงููุฏููุนุงุช
- ๐ ุงููุฎุงููุงุช
- ๐ ุงูุชุฌุฏูุฏุงุช
- โญ ุงูุฃุฏุงุก

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (Roadmap)

### ุงููุฑุญูุฉ 2 - Dialogs & Modals โ ููุชูู
- [x] ุญูุงุฑ ุชุณุฌูู ููุงููุฉ
- [x] ุญูุงุฑ ุชุณุฌูู ุฏูุนุฉ
- [x] ุญูุงุฑ ุฌุฏููุฉ ูุชุงุจุนุฉ
- [x] ุญูุงุฑ ุฅุถุงูุฉ ููุงุญุธุฉ

**ููุงุญุธุฉ:** ุฑุงุฌุน `EMPLOYEE_WORKSPACE_PHASE2_COMPLETE.md` ููุชูุงุตูู ุงููุงููุฉ

### ุงููุฑุญูุฉ 3 - Management Dashboard
- [ ] ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุฑูู
- [ ] ูุงุฌูุฉ ุชูุฒูุน ุงูุนููุฏ
- [ ] ุฌุฏูู ุฃุฏุงุก ุงูููุธููู
- [ ] ุชูุงุฑูุฑ ููุตูุฉ

### ุงููุฑุญูุฉ 4 - Features ุงููุชูุฏูุฉ
- [ ] ูุธุงู ุงูุชูุจููุงุช ุงูุชููุงุฆูุฉ
- [ ] ุงูุชุตุฏูุฑ ุฅูู Excel/PDF
- [ ] ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ (Charts)
- [ ] ูุธุงู ุงูููุงูุขุช

---

## ๐ ุงููุดุงูู ุงููุนุฑููุฉ

ูุง ุชูุฌุฏ ูุดุงูู ูุนุฑููุฉ ุญุงููุงู.

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- ุงูุชุญ Issue ูู GitHub
- ุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ

---

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ุฌุฒุก ูู ูุธุงู Fleetify.

---

**ุขุฎุฑ ุชุญุฏูุซ:** 28 ููุงูุฑ 2026  
**ุงูุฅุตุฏุงุฑ:** 1.1.0 (MVP + Phase 2 Complete)
