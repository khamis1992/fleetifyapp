# โจ ููุฒุฉ ุฅูุดุงุก ุงูููุงุชูุฑ ุงูุชููุงุฆูุฉ ูู ุฌุฏูู ุงูุฏูุนุงุช

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ููุฒุฉ ุฐููุฉ ุชุณูุญ ุจุฅูุดุงุก ุงูููุงุชูุฑ ุชููุงุฆูุงู ูุฃู ุนูุฏ ุจูุงุกู ุนูู ุฌุฏูู ุงูุฏูุนุงุช ุงููุญุณูุจ ูู ุจูุงูุงุช ุงูุนูุฏุ **ูุน ุฏุนู ุฅููุงู ุงูููุงุชูุฑ ุงููุงูุตุฉ**.

---

## ๐ฏ ุงููุดููุฉ ุงูุชู ุชุญููุง

### ุงูุญุงูุฉ 1: ุนููุฏ ุจุฏูู ููุงุชูุฑ
ุจุนุถ ุงูุนููุฏ ูุง ุชุญุชูู ุนูู ุฃู ููุงุชูุฑ ูู ุฌุฏูู `invoices`.

### ุงูุญุงูุฉ 2: ุนููุฏ ุจููุงุชูุฑ ูุงูุตุฉ โจ (ุฌุฏูุฏ)
ุจุนุถ ุงูุนููุฏ ุชุญุชูู ุนูู ููุงุชูุฑ ูููููุง ูุงูุตุฉ. ูุซูุงู:
- ุงูุนูุฏ ูุฌุจ ุฃู ูุญุชูู ุนูู **12 ูุงุชูุฑุฉ**
- ููู ุงูููุฌูุฏ ูุนููุงู **5 ููุงุชูุฑ ููุท**
- **ูููุต 7 ููุงุชูุฑ** โ

### ุงูุญู
ุงููุธุงู ุงูุขู **ููุชุดู ุชููุงุฆูุงู** ุงูููุงุชูุฑ ุงููุงูุตุฉ ููุณูุญ ุจุฅููุงููุง ุจุถุบุทุฉ ุฒุฑ ูุงุญุฏุฉ! โ

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุญุงูุฉ 1: ุนูุฏ ุจุฏูู ููุงุชูุฑ

1. **ุงูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุนูุฏ:** `/contracts/{contract_number}`
2. **ุงูุชูู ูุชุจููุจ "ุงูููุงุชูุฑ"**
3. **ุณุชุฌุฏ:**
   - ๐ `0 ูู 12 ูุงุชูุฑุฉ ูุชููุนุฉ`
   - ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ููุงุชูุฑ ููุฐุง ุงูุนูุฏ"
   - ุฒุฑ ุฃุฒุฑู ูุจูุฑ **"ุฅูุดุงุก ููุงุชูุฑ ุชููุงุฆูุฉ"**
4. **ุงุถุบุท ุนูู ุงูุฒุฑ:**
   - โ ุณูุชู ุฅูุดุงุก ุฌููุน ุงูููุงุชูุฑ (12 ูุงุชูุฑุฉ)
   - โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุฅูุดุงุก 12 ูุงุชูุฑุฉ ุฌุฏูุฏุฉ"
   - โ ุชุญุฏูุซ ููุฑู ูููุงุฆูุฉ

### ุงูุญุงูุฉ 2: ุนูุฏ ุจููุงุชูุฑ ูุงูุตุฉ โจ

1. **ุงูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุนูุฏ**
2. **ุงูุชูู ูุชุจููุจ "ุงูููุงุชูุฑ"**
3. **ุณุชุฌุฏ:**
   - ๐ `5 ูู 12 ูุงุชูุฑุฉ ูุชููุนุฉ` **(7 ูุงุชูุฑุฉ ูุงูุตุฉ)**
   - โ๏ธ ุชูุจูู ุจุฑุชูุงูู: "ุชููุต ูุฐุง ุงูุนูุฏ 7 ููุงุชูุฑ"
   - ุฒุฑ ุฃุฒุฑู **"ุฅููุงู ุงูููุงุชูุฑ ุงููุงูุตุฉ (7)"**
4. **ุงุถุบุท ุนูู ุงูุฒุฑ:**
   - โ ุณูุชู ุฅูุดุงุก ุงูููุงุชูุฑ ุงููุงูุตุฉ ููุท (7 ููุงุชูุฑ)
   - โ ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ ูู ุชุชุฃุซุฑ
   - โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุฅูุดุงุก 7 ููุงุชูุฑ ุฌุฏูุฏุฉ"

### ุงูุญุงูุฉ 3: ุนูุฏ ุจุฌููุน ุงูููุงุชูุฑ โ

- ๐ `12 ูู 12 ูุงุชูุฑุฉ ูุชููุนุฉ`
- โ ูุง ูุธูุฑ ุงูุฒุฑ
- โ ูุง ุชูุจููุงุช
- โ ูู ุดูุก ููุชูู!

---

## โ๏ธ ููู ูุนูู ุงููุธุงู

### 1. ุญุณุงุจ ุนุฏุฏ ุงูููุงุชูุฑ

```typescript
ุนุฏุฏ ุงูููุงุชูุฑ = CEIL(contract_amount / monthly_amount)
```

**ุฃู** ุฅุฐุง ูู ููู `contract_amount` ููุฌูุฏ:

```typescript
ุนุฏุฏ ุงูููุงุชูุฑ = ุนุฏุฏ ุงูุฃุดูุฑ ุจูู start_date ู end_date
```

### 2. ุญุณุงุจ ุชูุงุฑูุฎ ุงูุงุณุชุญูุงู

```typescript
// ูู ูุงุชูุฑุฉ ุชุณุชุญู ูู ุงูููู ุงูุฃูู ูู ูู ุดูุฑ
due_date[i] = ุฃูู ููู ูู ุงูุดูุฑ (i) ุจุนุฏ ุจุฏุงูุฉ ุงูุนูุฏ
```

**ูุซุงู:**
- ุจุฏุงูุฉ ุงูุนูุฏ: `2025-01-15`
- ุงููุงุชูุฑุฉ 1: `2025-02-01` (ุฃูู ููู ูู ุงูุดูุฑ ุงูุชุงูู)
- ุงููุงุชูุฑุฉ 2: `2025-03-01`
- ุงููุงุชูุฑุฉ 3: `2025-04-01`

### 3. ุชูููุฏ ุฃุฑูุงู ุงูููุงุชูุฑ

```typescript
invoice_number = `INV-${contract_number}-${month_number}`
```

**ูุซุงู:**
- ุงูุนูุฏ: `CNT-25-0510`
- ุงููุงุชูุฑุฉ 1: `INV-CNT-25-0510-001`
- ุงููุงุชูุฑุฉ 2: `INV-CNT-25-0510-002`
- ุงููุงุชูุฑุฉ 3: `INV-CNT-25-0510-003`

---

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ

### RPC Function

**ุงูุงุณู:** `generate_invoices_from_payment_schedule`

**ุงููุฏุฎูุงุช:**
- `p_contract_id` (UUID): ูุนุฑู ุงูุนูุฏ

**ุงููุฎุฑุฌุงุช:**
- `INTEGER`: ุนุฏุฏ ุงูููุงุชูุฑ ุงููููุดุฃุฉ

**ุงูุฎุตุงุฆุต:**
- โ ุชุชุญูู ูู ูุฌูุฏ ุงูุนูุฏ
- โ ุชุชุญูู ูู ุงูุจูุงูุงุช ุงููุทููุจุฉ (start_dateุ monthly_amount)
- โ **ุชุชุฌูุจ ุงูุชูุฑุงุฑ** - ูุง ุชูุดุฆ ูุงุชูุฑุฉ ุฅุฐุง ูุงูุช ููุฌูุฏุฉ
- โ ุชูุดุฆ ููุงุชูุฑ ุจุญุงูุฉ `unpaid` ุงูุชุฑุงุถูุงู
- โ ุชุถูู ูุตู ุชููุงุฆู ููู ูุงุชูุฑุฉ

### ุจูุงูุงุช ุงููุงุชูุฑุฉ ุงููููุดุฃุฉ

```typescript
{
  company_id: ูู ุงูุนูุฏ,
  customer_id: ูู ุงูุนูุฏ,
  contract_id: ูุนุฑู ุงูุนูุฏ,
  invoice_number: "INV-{contract_number}-{month}",
  invoice_date: due_date - 5 ุฃูุงู,
  due_date: ุฃูู ููู ูู ุงูุดูุฑ,
  total_amount: monthly_amount,
  payment_status: "unpaid",
  invoice_type: "rental",
  description: "ูุงุชูุฑุฉ ุฅูุฌุงุฑ ุดูุฑูุฉ - ุงูุดูุฑ X ูู Y"
}
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุจู ุฅูุดุงุก ุงูููุงุชูุฑ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ูุง ุชูุฌุฏ ููุงุชูุฑ ููุฐุง ุงูุนูุฏ             โ
โ                                         โ
โ  ููููู ุฅูุดุงุก ุงูููุงุชูุฑ ุชููุงุฆูุงู        โ
โ  ุจูุงุกู ุนูู ุฌุฏูู ุงูุฏูุนุงุช               โ
โ                                         โ
โ  [๐ ุฅูุดุงุก ููุงุชูุฑ ุชููุงุฆูุฉ]             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุฃุซูุงุก ุงูุฅูุดุงุก

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  [โณ ุฌุงุฑู ุฅูุดุงุก ุงูููุงุชูุฑ...]           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุจุนุฏ ุงูุฅูุดุงุก

```
โ ุชู ุฅูุดุงุก 12 ูุงุชูุฑุฉ ูู ุฌุฏูู ุงูุฏูุนุงุช

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ูุงุชูุฑุฉ #INV-CNT-25-0510-001           โ
โ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู: 01 ูุจุฑุงูุฑ 2025      โ
โ ุงููุจูุบ: 2,200 ุฑ.ู                     โ
โ [๐ฐ ุฏูุน ุงูุขู]  [๐ ุนุฑุถ]              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ูุงุชูุฑุฉ #INV-CNT-25-0510-002           โ
โ ...                                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ุงููููุงุช ุงูููุนุฏููุฉ

### 1. ุตูุญุฉ ุชูุงุตูู ุงูุนูุฏ
๐ `src/components/contracts/ContractDetailsPage.tsx`

**ุงูุชุนุฏููุงุช:**
- โ ุฅุถุงูุฉ `Loader2` ููู imports
- โ ุฅุถุงูุฉ state `isGenerating`
- โ ุฅุถุงูุฉ ุฏุงูุฉ `handleGenerateInvoicesFromSchedule`
- โ ุฅุถุงูุฉ ุฒุฑ "ุฅูุดุงุก ูู ุฌุฏูู ุงูุฏูุนุงุช" (ูุธูุฑ ููุท ุนูุฏ ุนุฏู ูุฌูุฏ ููุงุชูุฑ)
- โ ุชุญุณูู ุนุฑุถ ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ููุงุชูุฑ"

### 2. ูุงุนุฏุฉ ุงูุจูุงูุงุช
๐ `supabase/migrations/20251103000000_create_invoices_from_payment_schedule.sql`

**ุงููุญุชูู:**
- โ RPC function ุฌุฏูุฏุฉ
- โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ุดุงููุฉ
- โ ุตูุงุญูุงุช ูููุณุชุฎุฏููู ุงููุตุฑุญ ููู
- โ ุชุนูููุงุช ููุซุงุฆู ูุงููุฉ

---

## โ ุงูููุงุฆุฏ

1. **ุชูููุฑ ุงูููุช** - ุฅูุดุงุก ุฌููุน ุงูููุงุชูุฑ ุจุถุบุทุฉ ุฒุฑ ูุงุญุฏุฉ
2. **ุชุฌูุจ ุงูุฃุฎุทุงุก** - ุญุณุงุจุงุช ุชููุงุฆูุฉ ุฏูููุฉ
3. **ูุง ุชูุฑุงุฑ** - ุชุชุญูู ูู ุนุฏู ูุฌูุฏ ููุงุชูุฑ ููุฑุฑุฉ
4. **ูุฑููุฉ** - ูุนูู ูุน ุฃู ุนูุฏ ุจุบุถ ุงููุธุฑ ุนู ุงููุฏุฉ
5. **ุชูุงูู ูุงูู** - ูุชูุงูู ูุน ูุธุงู ุงูููุงุชูุฑ ุงูููุฌูุฏ

---

## ๐ ุงูุฃูุงู

- โ `SECURITY DEFINER` - ุชููุฐ ุจุตูุงุญูุงุช ุงููุงูู
- โ ุงูุชุญูู ูู ุงูุจูุงูุงุช ูุจู ุงูุฅูุดุงุก
- โ ููุน ุงูุชูุฑุงุฑ
- โ ุตูุงุญูุงุช ูุญุฏูุฏุฉ ูููุณุชุฎุฏููู ุงููุตุฑุญ ููู ููุท

---

## ๐ ูุซุงู ุนููู

### ุนูุฏ ุจุงูุจูุงูุงุช ุงูุชุงููุฉ:
```typescript
{
  contract_number: "CNT-25-0510",
  start_date: "2025-10-18",
  monthly_amount: 2200,
  contract_amount: 26400, // 12 ุดูุฑ ร 2200
}
```

### ุงููุชูุฌุฉ:
ุณูุชู ุฅูุดุงุก **12 ูุงุชูุฑุฉ**:

| ุฑูู ุงููุงุชูุฑุฉ | ุชุงุฑูุฎ ุงูุงุณุชุญูุงู | ุงููุจูุบ | ุงูุญุงูุฉ |
|--------------|-----------------|--------|--------|
| INV-CNT-25-0510-001 | 2025-11-01 | 2,200 ุฑ.ู | ุบูุฑ ูุฏููุนุฉ |
| INV-CNT-25-0510-002 | 2025-12-01 | 2,200 ุฑ.ู | ุบูุฑ ูุฏููุนุฉ |
| INV-CNT-25-0510-003 | 2026-01-01 | 2,200 ุฑ.ู | ุบูุฑ ูุฏููุนุฉ |
| ... | ... | ... | ... |
| INV-CNT-25-0510-012 | 2026-10-01 | 2,200 ุฑ.ู | ุบูุฑ ูุฏููุนุฉ |

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุทุฑููุฉ ุงูุงุฎุชุจุงุฑ:

1. ุงูุชุญ ุนูุฏ ููุณ ูู ููุงุชูุฑ
2. ุงูุชูู ูุชุจููุจ "ุงูููุงุชูุฑ"
3. ุงุถุบุท ุนูู "ุฅูุดุงุก ููุงุชูุฑ ุชููุงุฆูุฉ"
4. ุงูุชุธุฑ ุฑุณุงูุฉ ุงููุฌุงุญ
5. ุชุญูู ูู ุธููุฑ ุงูููุงุชูุฑ ูู ุงููุงุฆูุฉ
6. ุงูุชูู ูุชุจููุจ "ุฌุฏูู ุงูุฏูุนุงุช" ููููุงุฑูุฉ

### ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```sql
-- ุนุฏุฏ ุงูููุงุชูุฑ ูุนูุฏ ูุนูู
SELECT COUNT(*) 
FROM invoices 
WHERE contract_id = 'contract-uuid';

-- ุนุฑุถ ุฌููุน ุงูููุงุชูุฑ
SELECT 
  invoice_number,
  due_date,
  total_amount,
  payment_status,
  description
FROM invoices
WHERE contract_id = 'contract-uuid'
ORDER BY due_date;
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฒุฑ ูุธูุฑ ููุท ุนูุฏ ุนุฏู ูุฌูุฏ ููุงุชูุฑ** - ูููุน ุงูุฅูุดุงุก ุงููุชูุฑุฑ
2. **ุงูุฏุงูุฉ ุฐููุฉ** - ูู ุชูุดุฆ ููุงุชูุฑ ููุฑุฑุฉ ุญุชู ูู ุชู ุชุดุบูููุง ูุฑุชูู
3. **ุงูุชูุงุฑูุฎ ููุทููุฉ** - ุชุจุฏุฃ ูู ุงูุดูุฑ ุงูุชุงูู ูุจุฏุงูุฉ ุงูุนูุฏ
4. **ุชูุงูู ูุงูู** - ุงูููุงุชูุฑ ุงููููุดุฃุฉ ุชุนูู ูุน ุฌููุน ูุธุงุฆู ุงููุธุงู (ุฏูุนุ ุทุจุงุนุฉุ ุฅูุฎ)

---

## ๐จ ุงูุชุตููู

- **ุฒุฑ ุฃุฒุฑู ุฌุฐุงุจ** ูุน gradient
- **ุฃููููุฉ ุชุญุฏูุซ** ุฏูุงุฑุฉ ุฃุซูุงุก ุงูุชุญููู
- **ุฑุณุงูุฉ ูุงุถุญุฉ** ูููุณุชุฎุฏู
- **ุชุฃุซูุฑุงุช hover** ุงุญุชุฑุงููุฉ

---

## ๐ธ ุฃูุซูุฉ ุชูุถูุญูุฉ

### ูุซุงู 1: ุนูุฏ ุจุฏูู ููุงุชูุฑ ููุงุฆูุงู

**ุงูุจูุงูุงุช:**
```
ุงูุนูุฏ: CNT-25-0510
ุงููุจูุบ ุงูุดูุฑู: 2,200 ุฑ.ู
ุฅุฌูุงูู ุงูุนูุฏ: 26,400 ุฑ.ู
ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ: 0
ุงูููุงุชูุฑ ุงููุชููุนุฉ: 12
```

**ุงููุชูุฌุฉ ุจุนุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ:**
```
โ ุชู ุฅูุดุงุก 12 ูุงุชูุฑุฉ ุฌุฏูุฏุฉ ูู ุฌุฏูู ุงูุฏูุนุงุช

ุงูููุงุชูุฑ ุงููููุดุฃุฉ:
- INV-CNT-25-0510-001 (2025-11-01) โ 2,200 ุฑ.ู
- INV-CNT-25-0510-002 (2025-12-01) โ 2,200 ุฑ.ู
- ...
- INV-CNT-25-0510-012 (2026-10-01) โ 2,200 ุฑ.ู
```

---

### ูุซุงู 2: ุนูุฏ ุจููุงุชูุฑ ูุงูุตุฉ

**ุงูุจูุงูุงุช:**
```
ุงูุนูุฏ: CNT-25-0455
ุงููุจูุบ ุงูุดูุฑู: 2,100 ุฑ.ู
ุฅุฌูุงูู ุงูุนูุฏ: 25,200 ุฑ.ู (12 ุดูุฑ)
ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ: 5
ุงูููุงุชูุฑ ุงููุชููุนุฉ: 12
ุงูููุงุชูุฑ ุงููุงูุตุฉ: 7 โ๏ธ
```

**ูุง ุณุชุฑุงู ูู ุงููุงุฌูุฉ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ููุงุชูุฑ ุงูุนูุฏ                               โ
โ 5 ูู 12 ูุงุชูุฑุฉ ูุชููุนุฉ (7 ูุงุชูุฑุฉ ูุงูุตุฉ)   โ
โ                                             โ
โ [๐ ุฅููุงู ุงูููุงุชูุฑ ุงููุงูุตุฉ (7)]            โ
โ [+ ุฅูุดุงุก ูุงุชูุฑุฉ]                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ๏ธ ุชูุจูู: ุชููุต ูุฐุง ุงูุนูุฏ 7 ููุงุชูุฑ ูู ุฃุตู 12 ูุงุชูุฑุฉ 
   ูุชููุนุฉ ุญุณุจ ุฌุฏูู ุงูุฏูุนุงุช. ููููู ุฅูุดุงุก ุงูููุงุชูุฑ 
   ุงููุงูุตุฉ ุชููุงุฆูุงู ุจุงูุถุบุท ุนูู ุงูุฒุฑ ุฃุนูุงู.
```

**ุงููุชูุฌุฉ ุจุนุฏ ุงูุถุบุท:**
```
โ ุชู ุฅูุดุงุก 7 ููุงุชูุฑ ุฌุฏูุฏุฉ ูู ุฌุฏูู ุงูุฏูุนุงุช

ุงูููุงุชูุฑ ุงููููุดุฃุฉ (ุงููุงูุตุฉ ููุท):
- INV-CNT-25-0455-006 (2026-06-01) โ 2,100 ุฑ.ู
- INV-CNT-25-0455-007 (2026-07-01) โ 2,100 ุฑ.ู
- ...
- INV-CNT-25-0455-012 (2026-12-01) โ 2,100 ุฑ.ู

ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ ูุณุจูุงู (ูู ุชุชุฃุซุฑ):
- INV-CNT-25-0455-001 โ
- INV-CNT-25-0455-002 โ
- ...
- INV-CNT-25-0455-005 โ
```

---

### ูุซุงู 3: ุนูุฏ ููุชูู

**ุงูุจูุงูุงุช:**
```
ุงูุนูุฏ: CNT-25-0450
ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ: 12
ุงูููุงุชูุฑ ุงููุชููุนุฉ: 12
ุงูููุงุชูุฑ ุงููุงูุตุฉ: 0 โ
```

**ูุง ุณุชุฑุงู:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ููุงุชูุฑ ุงูุนูุฏ                               โ
โ 12 ูู 12 ูุงุชูุฑุฉ ูุชููุนุฉ โ                  โ
โ                                             โ
โ [+ ุฅูุดุงุก ูุงุชูุฑุฉ]                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

(ูุง ูุธูุฑ ุฒุฑ "ุฅูุดุงุก ููุงุชูุฑ ุชููุงุฆูุฉ" - ูู ุดูุก ููุชูู)
```

---

## ๐ ููู ูุนูู ุงูุงูุชุดุงู ุงูุฐูู

```typescript
// 1. ุญุณุงุจ ุงูููุงุชูุฑ ุงููุชููุนุฉ
const expectedCount = Math.ceil(contract_amount / monthly_amount);
// ูุซุงู: 26,400 รท 2,200 = 12 ูุงุชูุฑุฉ

// 2. ุญุณุงุจ ุงูููุงุชูุฑ ุงูููุฌูุฏุฉ
const existingCount = invoices.length;
// ูุซุงู: 5 ููุงุชูุฑ

// 3. ุญุณุงุจ ุงูููุงุชูุฑ ุงููุงูุตุฉ
const missingCount = expectedCount - existingCount;
// ูุซุงู: 12 - 5 = 7 ููุงุชูุฑ ูุงูุตุฉ

// 4. ุนุฑุถ ุงูุฒุฑ ูุงูุชูุจูู
if (missingCount > 0) {
  // ุฃุธูุฑ ุงูุฒุฑ ูุงูุชูุจูู
  showButton = true;
  buttonText = invoices.length === 0 
    ? "ุฅูุดุงุก ููุงุชูุฑ ุชููุงุฆูุฉ"
    : `ุฅููุงู ุงูููุงุชูุฑ ุงููุงูุตุฉ (${missingCount})`;
}
```

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 3 ููููุจุฑ 2025  
**ุขุฎุฑ ุชุญุฏูุซ:** 3 ููููุจุฑ 2025 (ุฅุถุงูุฉ ุฏุนู ุงูููุงุชูุฑ ุงููุงูุตุฉ)  
**ุงูุญุงูุฉ:** โ ููุชูู ูููุฎุชุจุฑ  
**ุงููุทูุฑ:** Cursor AI

