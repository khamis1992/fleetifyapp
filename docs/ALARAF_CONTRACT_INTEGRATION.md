# โ๏ธ ุชูุงูู ุนูุฏ ุดุฑูุฉ ุงูุนุฑุงู ุงููุงูููู - ุฏููู ุดุงูู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก **ุนูุฏ ุฅูุฌุงุฑ ูุงูููู ุฑุณูู** ูุดุฑูุฉ ุงูุนุฑุงู ูุชูุงูู ุจุงููุงูู ูุน FleetifyAppุ ูุณุชุฎุฏู ุจูุงูุงุช ุญููููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

---

## ๐ ุงููููุงุช ุงููููุดุฃุฉ

### 1. ุงููููู ุงูุฑุฆูุณู
๐ **`src/components/contracts/AlarafOfficialContract.tsx`**
- ูููู React/TypeScript ูุงูู
- ูุณุชุฎุฏู ุจูุงูุงุช ุญููููุฉ ูู ุงูุนูุฏ
- ูุญุณุจ ุฌุฏูู ุงูุฏูุนุงุช ุชููุงุฆูุงู
- ูุนุจุฆ ุฌููุน ุงูุญููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุงุจู ููุทุจุงุนุฉ

### 2. ุงูุนูุฏ HTML ูููุนุงููุฉ
๐ **`.superdesign/design_iterations/official_legal_contract.html`**
- ูููุนุงููุฉ ูู Superdesign Canvas
- ุฌููุน ุงูู 16 ูุงุฏุฉ ูุงููุฉ
- ุจุฏูู ุดุนุงุฑ
- ุจุฏูู ุฃููุงู
- ุจุฏูู ุฃููููุงุช
- ุจุฏูู ุฑููุฒ BREACH

---

## โ ุงูุชุนุจุฆุฉ ุงูุชููุงุฆูุฉ ููุจูุงูุงุช

### ุงูุจูุงูุงุช ุงูููุนุจุฃุฉ ุชููุงุฆูุงู:

#### ูุนูููุงุช ุงูุนูุฏ:
```typescript
โ ุฑูู ุงูุนูุฏ: contract.contract_number
โ ุงูุชุงุฑูุฎ ุงููุฌุฑู: ูุญุณูุจ ุชููุงุฆูุงู
โ ุงูุชุงุฑูุฎ ุงููููุงุฏู: ูุญุณูุจ ุชููุงุฆูุงู
โ ุงูููู: ูุญุณูุจ ูู ุงูุชุงุฑูุฎ ุงูุญุงูู
```

#### ูุนูููุงุช ุงููุณุชุฃุฌุฑ (ุงูุทุฑู ุงูุซุงูู):
```typescript
โ ุงูุงุณู ุงููุงูู: ูู customer (ุนุฑุจู ุฃู ุฅูุฌููุฒู)
โ ุฑูู ุงููููุฉ: customer.national_id
โ ุงูุฌูุณูุฉ: customer.nationality
โ ุงูุนููุงู: customer.address
โ ุฑูู ุงูุฌูุงู: customer.phone
โ ุฑูู ุฑุฎุตุฉ ุงูููุงุฏุฉ: customer.driver_license_number
```

#### ุชูุงุตูู ุงููุฑูุจุฉ:
```typescript
โ ุงูููุน/ุงููุงุฑูุฉ: vehicle.make
โ ุงูููุฏูู: vehicle.model
โ ุฑูู ุงูููุญุฉ: vehicle.plate_number
โ ุฑูู ุงููููู (VIN): vehicle.vin_number
โ ุณูุฉ ุงูุตูุน: vehicle.year
โ ุงูููู: vehicle.color
```

#### ุงููุนูููุงุช ุงููุงููุฉ:
```typescript
โ ุงูุฅูุฌุงุฑ ุงูุดูุฑู: contract.monthly_amount
โ ุฅุฌูุงูู ุงูุนูุฏ: contract.contract_amount
โ ุงููุฏุฉ: ูุญุณูุจุฉ ูู start_date ู end_date
โ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ: contract.start_date
โ ุชุงุฑูุฎ ุงูููุงูุฉ: contract.end_date
```

#### ุฌุฏูู ุงูุฏูุนุงุช (ูุญุณูุจ ุชููุงุฆูุงู):
```typescript
โ ุนุฏุฏ ุงูุฏูุนุงุช: contract_amount รท monthly_amount
โ ุชูุงุฑูุฎ ุงูุงุณุชุญูุงู: start_date + (n ุดููุฑ)
โ ุงููุจูุบ ููู ุฏูุนุฉ: monthly_amount
โ ุงูุฅุฌูุงูู: contract_amount
```

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุฎุทูุฉ 1: ุงุณุชูุฑุงุฏ ุงููููู

```typescript
import { AlarafOfficialContract } from '@/components/contracts/AlarafOfficialContract';
```

### ุงูุฎุทูุฉ 2: ุงุณุชุฎุฏุงูู ูู OfficialContractView

ูููู ุงุณุชุจุฏุงู ุงููููู ุงูุญุงูู ุฃู ุฅุถุงูุฉ ุฎูุงุฑ ูุนูุฏ ุงูุนุฑุงู:

```typescript
// ูู OfficialContractView.tsx
import { AlarafOfficialContract } from './AlarafOfficialContract';

export const OfficialContractView = ({ contract }) => {
  // ุฅุฐุง ูุงูุช ุงูุดุฑูุฉ ูู ุงูุนุฑุงูุ ุงุณุชุฎุฏู ุนูุฏ ุงูุนุฑุงู
  const isAlarafCompany = contract.company_id === 'alaraf-company-id';
  
  if (isAlarafCompany) {
    return <AlarafOfficialContract contract={contract} />;
  }
  
  // ูุฅูุง ุงุณุชุฎุฏู ุงูุนูุฏ ุงูุนุงุฏู
  return <DefaultOfficialContract contract={contract} />;
};
```

### ุงูุฎุทูุฉ 3: ุงูุทุจุงุนุฉ

```typescript
// ุฒุฑ ุงูุทุจุงุนุฉ
<Button onClick={() => window.print()}>
  ุทุจุงุนุฉ ุงูุนูุฏ
</Button>
```

---

## ๐ ูุง ูุชู ุญุณุงุจู ุชููุงุฆูุงู

### 1. ุฌุฏูู ุงูุฏูุนุงุช
```typescript
const paymentSchedule = useMemo(() => {
  // ุญุณุงุจ ุนุฏุฏ ุงูุฏูุนุงุช
  const numberOfPayments = Math.ceil(contract_amount / monthly_amount);
  
  // ุฅูุดุงุก ุฌุฏูู ุงูุฏูุนุงุช
  for (let i = 0; i < numberOfPayments; i++) {
    const dueDate = addMonths(start_date, i);
    schedule.push({
      number: i + 1,
      dueDate: format(dueDate, 'yyyy/MM/dd'),
      amount: monthly_amount
    });
  }
  
  return schedule;
}, [contract]);
```

**ุงููุชูุฌุฉ:**
- โ 12 ุตู (ูุซูุงู) ููุฏูุนุงุช
- โ ุชุงุฑูุฎ ุงุณุชุญูุงู ููู ุฏูุนุฉ
- โ ุงููุจูุบ ููู ุฏูุนุฉ
- โ ุตู ุงูุฅุฌูุงูู

### 2. ุงููุฏุฉ ุจุงูุดููุฑ
```typescript
const durationInMonths = Math.round(
  differenceInDays(end_date, start_date) / 30
);
```

### 3. ุงุณู ุงูุนููู
```typescript
// ููุฃูุฑุงุฏ
const name = `${first_name_ar} ${last_name_ar}`;

// ููุดุฑูุงุช
const name = company_name_ar;
```

---

## ๐จ ุงูุนูุฏ ูุชุถูู

### ุงููุณู ุงูุฑุฆูุณู (3 ุตูุญุงุช):
- [x] ุฑุฃุณ ุงูุดุฑูุฉ (ุงูุนุฑุงู)
- [x] ุฑูู ูุชุงุฑูุฎ ุงูุนูุฏ (ุชููุงุฆู)
- [x] ุงูุฃุทุฑุงู (ุจูุงูุงุช ุญููููุฉ)
- [x] ุงูุชูููุฏ
- [x] 16 ูุงุฏุฉ ูุงููููุฉ ูุงููุฉ
- [x] 6 ุฅูุฑุงุฑุงุช ููุงุฆูุฉ
- [x] ุงูุชูููุนุงุช

### ููุญู (ุฃ) - ุฌุฏูู ุงูุฏูุนุงุช:
- [x] ูุญุณูุจ ุชููุงุฆูุงู ูู ุงูุจูุงูุงุช
- [x] ุฌุฏูู ูุงูู ุจุนุฏุฏ ุงูุฃุดูุฑ
- [x] ุชูุงุฑูุฎ ุงุณุชุญูุงู ูุญุณูุจุฉ
- [x] ูุจุงูุบ ูู ุงูุนูุฏ
- [x] ุตู ุงูุฅุฌูุงูู

### ููุญู (1) - ุชูุฑูุฑ ุงููุญุต:
- [ ] ูููู ุฑุจุทู ุจู vehicle_inspections
- [ ] ุตูุฑ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุจูุงูุงุช ุงููุญุต ุงูุญููููุฉ

---

## ๐ ุงูุชูุงูู ูุน ุงููุธุงู

### ูู ContractDetailsDialog.tsx:

```typescript
import { AlarafOfficialContract } from './AlarafOfficialContract';

// ูู ุชุจููุจ "ุงูุนูุฏ ุงูุฑุณูู"
<TabsContent value="official-contract">
  <AlarafOfficialContract contract={contract} />
</TabsContent>
```

### ุฃู ูู ุตูุญุฉ ูููุตูุฉ:

```typescript
// ูู ContractDetailsPage.tsx
<TabsContent value="official">
  <div className="max-w-full overflow-auto">
    <AlarafOfficialContract contract={contract} />
  </div>
</TabsContent>
```

---

## ๐ ุงูุจูุงูุงุช ุงููุทููุจุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู ุงูุนููุฏ (contracts):
```sql
SELECT 
  id,
  contract_number,
  contract_date,
  start_date,
  end_date,
  contract_amount,
  monthly_amount,
  contract_type,
  status
FROM contracts
WHERE id = ?
```

### ุฌุฏูู ุงูุนููุงุก (customers):
```sql
SELECT
  first_name,
  last_name,
  first_name_ar,
  last_name_ar,
  company_name,
  company_name_ar,
  customer_type,
  national_id,
  nationality,
  address,
  phone,
  driver_license_number
FROM customers
WHERE id = contract.customer_id
```

### ุฌุฏูู ุงูุณูุงุฑุงุช (vehicles):
```sql
SELECT
  make,
  model,
  year,
  plate_number,
  vin_number,
  color
FROM vehicles
WHERE id = contract.vehicle_id
```

---

## โ๏ธ ุงูุชุฎุตูุต

### ุชุบููุฑ ูุนูููุงุช ุงูุดุฑูุฉ:

ูู ุงููููู `AlarafOfficialContract.tsx`ุ ุงุจุญุซ ุนู:

```typescript
<strong>ุงูุงุณู ุงูุชุฌุงุฑู:</strong> ุดุฑูุฉ ุงูุนุฑุงู...
<strong>ุงูุณุฌู ุงูุชุฌุงุฑู:</strong> 179973
<strong>ุงูููุฑ ุงูุฑุฆูุณู:</strong> ุฃู ุตูุงู...
<strong>ููุซููุง ุงูุณูุฏ:</strong> ุฎููุณ ูุงุดู ุงูุฌุงุจุฑ
```

ูููู ุฌุนููุง dynamic ูู ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ.

### ุชุบููุฑ ูุจูุบ ุงูุชุฃููู:

ุญุงููุงู ุซุงุจุช ุนูู 8,000 ุฑ.ู. ูููู ุฌุนูู:

```typescript
<strong>ูุจูุบ ุงูุชุฃููู:</strong> {contract.security_deposit || 8000}
```

---

## ๐จ๏ธ ุงูุทุจุงุนุฉ

### ุชููุงุฆูุฉ:
```typescript
// ุฒุฑ ุงูุทุจุงุนุฉ
const handlePrint = () => {
  window.print();
};

<Button onClick={handlePrint}>
  <Printer className="w-4 h-4 mr-2" />
  ุทุจุงุนุฉ ุงูุนูุฏ
</Button>
```

### ุงูุฅุนุฏุงุฏุงุช:
- โ ุญุฌู A4 ุชููุงุฆู
- โ ููุงูุด 2.5cm
- โ page breaks ุชููุงุฆูุฉ
- โ avoid-break ููููุงุฏ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ูุฅููุงู ุงูุชูุงูู:

1. **ุฅููุงู ุฌููุน ุงูููุงุฏ (4-16)**
   - ุญุงููุงู ุงููููู ูุญุชูู ุนูู ููุงุฏ 1-3 ููุท
   - ูุญุชุงุฌ ุฅุถุงูุฉ ุงูููุงุฏ ุงููุชุจููุฉ

2. **ุชุญุฏูุซ OfficialContractView**
   - ุงุณุชุจุฏุงู ุจู AlarafOfficialContract
   - ุฃู ุฅุถุงูุฉ ูุฎูุงุฑ

3. **ุฑุจุท ููุญู ุงููุญุต ุงูููู**
   - ุฌูุจ ุจูุงูุงุช ูู vehicle_inspections
   - ุนุฑุถ ุงูุตูุฑ ูู storage

4. **ุฅุถุงูุฉ ุงูุชูููุนุงุช ุงูุฅููุชุฑูููุฉ**
   - ุฏูุฌ ูุน ูุธุงู ุงูุชูููุนุงุช ุงูููุฌูุฏ
   - ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## โ ูุง ุชู ุฅูุฌุงุฒู

- [x] ุฅูุดุงุก ูููู React ููุนูุฏ
- [x] ุฌูุจ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [x] ุญุณุงุจ ุฌุฏูู ุงูุฏูุนุงุช ุชููุงุฆูุงู
- [x] ุชุนุจุฆุฉ ูุนูููุงุช ุงูุนููู
- [x] ุชุนุจุฆุฉ ูุนูููุงุช ุงูุณูุงุฑุฉ
- [x] ุชุนุจุฆุฉ ุงููุนูููุงุช ุงููุงููุฉ
- [x] ููุญู ุฃ (ุฌุฏูู ุงูุฏูุนุงุช)
- [x] ุชูุณูู ูุงูููู ุฑุณูู
- [x] ุญุฐู ุงูุฑููุฒ BREACH
- [x] ุญุฐู ุงูุดุนุงุฑ
- [x] ุจุฏูู ุฃููุงู
- [x] ุจุฏูู ุฃููููุงุช

---

## โณ ูุง ูุญุชุงุฌ ุฅููุงู

- [ ] ุฅุถุงูุฉ ุงูููุงุฏ 4-16 ุงููุงููุฉ ูู React
- [ ] ุฑุจุท ูุน OfficialContractView
- [ ] ููุญู 1 (ุชูุฑูุฑ ุงููุญุต) ูู DB
- [ ] ุญูู ุงูุชูููุน ุงูุฅููุชุฑููู

---

## ๐ ูู ุชุฑูุฏ ุฃู ุฃูููุ

ุณุฃุญุชุงุฌ ุฅูู:
1. ุฅุถุงูุฉ ุฌููุน ุงูููุงุฏ ุงูู 16 ูู ุงููููู
2. ุฑุจุทู ูุน ุตูุญุฉ ุงูุนูุฏ ุงูููุฌูุฏุฉ
3. ุงุฎุชุจุงุฑู ูุน ุจูุงูุงุช ุญููููุฉ

**ูู ุฃูุงุตู ุจุฅููุงู ุฌููุน ุงูููุงุฏุ** โ

