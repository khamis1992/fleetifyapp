# ูุธุงู ุญุฑูุฉ ุงูุญุณุงุจุงุช - Account Movement System

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุญุฑูุฉ ุงูุญุณุงุจุงุช ูุญุฏุฏ ุงูุญุณุงุจุงุช ุงูุชู ูููู ุฃู ุชููู ููุง ุญุฑูุงุช ูุงููุฉ (ุญุณุงุจุงุช ุชูุตูููุฉ) ูุงูุชู ูุง ูููู (ุญุณุงุจุงุช ุฑุฆูุณูุฉ)ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฑุจุท ุงูุญุณุงุจุงุช ุจุงูุนููุงุก ูุงูููุฑุฏูู ูุงูููุธููู.

## ๐๏ธ ุจููุฉ ุงููุธุงู

### 1. ุฃููุงุน ุงูุญุณุงุจุงุช

#### **ุญุณุงุจุงุช ุงูุฑุคูุณ (Header Accounts)**
- **ุงููุณุชูู:** 1-3
- **ุงูุฎุตุงุฆุต:** `is_header: true`
- **ุงูุบุฑุถ:** ุชุฌููุน ูุชุตููู ููุท
- **ุงูุญุฑูุงุช:** ูุง ุชูุจู ุญุฑูุงุช ูุงููุฉ ูุจุงุดุฑุฉ
- **ุฃูุซูุฉ:**
  - `1` - ุงูุฃุตูู
  - `11` - ุงูุฃุตูู ุงููุชุฏุงููุฉ  
  - `111` - ุงูููุฏูุฉ

#### **ุญุณุงุจุงุช ุงูุชูุงุตูู (Detail Accounts)**
- **ุงููุณุชูู:** 4+
- **ุงูุฎุตุงุฆุต:** `is_header: false`
- **ุงูุบุฑุถ:** ุชุณุฌูู ุงููุนุงููุงุช ุงููุนููุฉ
- **ุงูุญุฑูุงุช:** ุชูุจู ุญุฑูุงุช ูุงููุฉ
- **ุฃูุซูุฉ:**
  - `11101` - ุตูุฏูู ุงูููุฏูุฉ
  - `11201` - ุงูุจูู ุงูุฃููู
  - `11301` - ุนููู ุฃุญูุฏ ูุญูุฏ

#### **ุญุณุงุจุงุช ุงููุธุงู (System Accounts)**
- **ุงูุฎุตุงุฆุต:** `is_system: true`
- **ุงูุบุฑุถ:** ุญุณุงุจุงุช ูุญููุฉ ูููุธุงู
- **ุงูุชุนุฏูู:** ูุง ูููู ุชุนุฏูู ุฅุนุฏุงุฏุงุชูุง

### 2. ุฑุจุท ุงูุญุณุงุจุงุช

#### **ุฑุจุท ุงูุนููุงุก (Customer Linking)**
- **ุงูุญุณุงุจุงุช ุงููุคููุฉ:**
  - `113xxx` - ุฐูู ุงูุนููุงุก
  - `114xxx` - ุฃูุฑุงู ุงููุจุถ (ููุจูุงูุงุช ูุดููุงุช)
- **ุงูุดุฑุท:** ุญุณุงุจุงุช ุชูุตูููุฉ ููุท (`is_header: false`)
- **ุงูุงุณุชุฎุฏุงู:** ุฑุจุท ุงูููุงุชูุฑ ูุงููุฏููุนุงุช ุจุญุณุงุจุงุช ุงูุนููุงุก

#### **ุฑุจุท ุงูููุฑุฏูู (Vendor Linking)**
- **ุงูุญุณุงุจุงุช ุงููุคููุฉ:**
  - `213xxx` - ุฐูู ุงูููุฑุฏูู
  - `214xxx` - ุฃูุฑุงู ุงูุฏูุน (ููุจูุงูุงุช ูุดููุงุช)
- **ุงูุดุฑุท:** ุญุณุงุจุงุช ุชูุตูููุฉ ููุท (`is_header: false`)
- **ุงูุงุณุชุฎุฏุงู:** ุฑุจุท ููุงุชูุฑ ุงููุดุชุฑูุงุช ูุงููุฏููุนุงุช ุจุญุณุงุจุงุช ุงูููุฑุฏูู

#### **ุฑุจุท ุงูููุธููู (Employee Linking)**
- **ุงูุญุณุงุจุงุช ุงููุคููุฉ:**
  - `215xxx` - ุฑูุงุชุจ ุงูููุธููู
  - `216xxx` - ุงูุชุฃูููุงุช ุงูุงุฌุชูุงุนูุฉ
- **ุงูุดุฑุท:** ุญุณุงุจุงุช ุชูุตูููุฉ ููุท (`is_header: false`)
- **ุงูุงุณุชุฎุฏุงู:** ุฑุจุท ุงูุฑูุงุชุจ ูุงููุณุชุญูุงุช ุจุญุณุงุจุงุช ุงูููุธููู

## ๐ง ุงูููููุงุช ุงูุชูููุฉ

### 1. AccountMovementSettings.tsx
**ุงููุธููุฉ:** ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุญุฑูุฉ ุงูุญุณุงุจุงุช

**ุงูููุฒุงุช:**
- ุนุฑุถ ุฌููุน ุงูุญุณุงุจุงุช ูุน ุญุงูุฉ ุงูุญุฑูุฉ
- ุชุญุฏูุฏ ุฅููุงููุฉ ุฑุจุท ูู ุญุณุงุจ ุจุงูุนููุงุก/ุงูููุฑุฏูู/ุงูููุธููู
- ุฅุญุตุงุฆูุงุช ุดุงููุฉ ููุญุณุงุจุงุช
- ุจุญุซ ูุชุตููุฉ ุงูุญุณุงุจุงุช
- ุญูุธ ุงูุฅุนุฏุงุฏุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ุงูุงุณุชุฎุฏุงู:**
```typescript
<AccountMovementSettings />
```

### 2. AccountLinkingMigration.tsx
**ุงููุธููุฉ:** ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฏุนู ุฑุจุท ุงูุญุณุงุจุงุช

**ุงูููุฒุงุช:**
- ูุญุต ูุฌูุฏ ุฃุนูุฏุฉ ุงูุฑุจุท ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุทุจูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู ููุญุณุงุจุงุช ุงูููุฌูุฏุฉ
- ุชุนููู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุจูุงุกู ุนูู ุฑูุฒ ุงูุญุณุงุจ
- ูุงุฌูุฉ ุขููุฉ ููุชุญุฏูุซ

**ุฃุนูุฏุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ:**
```sql
ALTER TABLE chart_of_accounts 
ADD COLUMN can_link_customers BOOLEAN DEFAULT FALSE,
ADD COLUMN can_link_vendors BOOLEAN DEFAULT FALSE,
ADD COLUMN can_link_employees BOOLEAN DEFAULT FALSE;
```

### 3. AccountsTreeView.tsx (ูุญุณู)
**ุงูุชุญุณููุงุช ุงููุถุงูุฉ:**
- ูุคุดุฑ ููุน ุงูุญุณุงุจ (ุชูุตููู/ุฑุฆูุณู)
- ุฃููููุงุช ุฑุจุท ุงูุญุณุงุจุงุช:
  - ๐ฅ ุงูุนููุงุก (ุฃุฒุฑู)
  - ๐ข ุงูููุฑุฏูู (ุฃุฎุถุฑ)  
  - โ ุงูููุธููู (ุจููุณุฌู)

## ๐ ููุงุนุฏ ุงูุจูุงูุงุช

### ุฌุฏูู chart_of_accounts
```sql
CREATE TABLE chart_of_accounts (
  id UUID PRIMARY KEY,
  account_code VARCHAR NOT NULL,
  account_name VARCHAR NOT NULL,
  account_name_ar VARCHAR,
  account_level INTEGER NOT NULL,
  is_header BOOLEAN DEFAULT FALSE,
  is_system BOOLEAN DEFAULT FALSE,
  can_link_customers BOOLEAN DEFAULT FALSE,
  can_link_vendors BOOLEAN DEFAULT FALSE,
  can_link_employees BOOLEAN DEFAULT FALSE,
  -- ... ุจุงูู ุงูุฃุนูุฏุฉ
);
```

### ุงูููู ุงูุงูุชุฑุงุถูุฉ
```typescript
// ููุทู ุชุญุฏูุฏ ุงูููู ุงูุงูุชุฑุงุถูุฉ
const isHeader = account_level <= 3;
const canLinkCustomers = !isHeader && (
  account_code.startsWith('113') || 
  account_code.startsWith('114')
);
const canLinkVendors = !isHeader && (
  account_code.startsWith('213') || 
  account_code.startsWith('214')
);
const canLinkEmployees = !isHeader && (
  account_code.startsWith('215') || 
  account_code.startsWith('216')
);
```

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงููุตูู ุฅูู ุฅุนุฏุงุฏุงุช ุงูุญุฑูุฉ
1. ุงูุชูู ุฅูู **ุงููุงููุฉ** > **ุดุฌุฑุฉ ุงูุญุณุงุจุงุช**
2. ุงุฎุชุฑ ุชุงุจ **"ุฅุนุฏุงุฏุงุช ุงูุญุฑูุฉ"**
3. ุณุชุฌุฏ ุชุงุจูู ูุฑุนููู:
   - **ุฅุนุฏุงุฏุงุช ุงูุญุฑูุฉ:** ูุชุญุฏูุฏ ุงูุญุณุงุจุงุช ุงููุงุจูุฉ ููุฑุจุท
   - **ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช:** ูุชุทุจูู ุงูุชุญุฏูุซุงุช ุงููุทููุจุฉ

### 2. ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุฑุฉ ูุงุญุฏุฉ)
1. ุงุฐูุจ ุฅูู ุชุงุจ **"ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช"**
2. ุงุถุบุท **"ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช"** ููุชุญูู ูู ุงูุญุงูุฉ
3. ุฅุฐุง ูุงู ุงูุชุญุฏูุซ ูุทููุจุงูุ ุงุถุบุท **"ุชุทุจูู ุงูุชุญุฏูุซ"**
4. ุงูุชุธุฑ ุญุชู ุงูุชูุงู ุงูุชุญุฏูุซ

### 3. ุชุฎุตูุต ุฅุนุฏุงุฏุงุช ุงูุญุฑูุฉ
1. ูู ุชุงุจ **"ุฅุนุฏุงุฏุงุช ุงูุญุฑูุฉ"**
2. ุงุณุชุฎุฏู ุงูุจุญุซ ููุนุซูุฑ ุนูู ุญุณุงุจุงุช ูุญุฏุฏุฉ
3. ูุนูู/ุนุทูู ุฑุจุท ุงูุญุณุงุจุงุช ุจุงุณุชุฎุฏุงู ุงูููุงุชูุญ:
   - **ุฑุจุท ุงูุนููุงุก:** ููุญุณุงุจุงุช 113xxx, 114xxx
   - **ุฑุจุท ุงูููุฑุฏูู:** ููุญุณุงุจุงุช 213xxx, 214xxx  
   - **ุฑุจุท ุงูููุธููู:** ููุญุณุงุจุงุช 215xxx, 216xxx
4. ุงุถุบุท **"ุญูุธ ุงูุฅุนุฏุงุฏุงุช"** ูุชุทุจูู ุงูุชุบููุฑุงุช

### 4. ุงุณุชูุฑุงุฏ CSV ูุน ุฅุนุฏุงุฏุงุช ุงูุญุฑูุฉ
ุนูุฏ ุงุณุชูุฑุงุฏ ููู CSV:
- ุงูุญุณุงุจุงุช ูู ุงููุณุชูู 1-3 ุชูุนููู ูู `is_header: true` ุชููุงุฆูุงู
- ุงูุญุณุงุจุงุช ูู ุงููุณุชูู 4+ ุชูุนููู ูู `is_header: false` ุชููุงุฆูุงู
- ุฅุนุฏุงุฏุงุช ุงูุฑุจุท ุชูุญุฏุฏ ุจูุงุกู ุนูู ุฑูุฒ ุงูุญุณุงุจ ุชููุงุฆูุงู

## ๐ฏ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุญุณุงุจ ุนููู
```
ุฑูุฒ ุงูุญุณุงุจ: 11301001
ุงุณู ุงูุญุณุงุจ: ุนููู - ุดุฑูุฉ ุงูุฃูุฑุงู ููุชุฌุงุฑุฉ
ุงููุณุชูู: 4
ููุน ุงูุญุณุงุจ: ุชูุตููู (is_header: false)
ุฑุจุท ุงูุนููุงุก: โ ููุนู
ุฑุจุท ุงูููุฑุฏูู: โ ูุนุทู
ุฑุจุท ุงูููุธููู: โ ูุนุทู
```

### ูุซุงู 2: ุญุณุงุจ ููุฑุฏ
```
ุฑูุฒ ุงูุญุณุงุจ: 21301001  
ุงุณู ุงูุญุณุงุจ: ููุฑุฏ - ุดุฑูุฉ ุงูููู ููููุงุฏ
ุงููุณุชูู: 4
ููุน ุงูุญุณุงุจ: ุชูุตููู (is_header: false)
ุฑุจุท ุงูุนููุงุก: โ ูุนุทู
ุฑุจุท ุงูููุฑุฏูู: โ ููุนู
ุฑุจุท ุงูููุธููู: โ ูุนุทู
```

### ูุซุงู 3: ุญุณุงุจ ุฑุฆูุณู
```
ุฑูุฒ ุงูุญุณุงุจ: 113
ุงุณู ุงูุญุณุงุจ: ุฐูู ุงูุนููุงุก
ุงููุณุชูู: 3
ููุน ุงูุญุณุงุจ: ุฑุฆูุณู (is_header: true)
ุฑุจุท ุงูุนููุงุก: โ ูุนุทู (ุญุณุงุจ ุฑุฆูุณู)
ุฑุจุท ุงูููุฑุฏูู: โ ูุนุทู (ุญุณุงุจ ุฑุฆูุณู)
ุฑุจุท ุงูููุธููู: โ ูุนุทู (ุญุณุงุจ ุฑุฆูุณู)
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดููุฉ: ูุง ุชุธูุฑ ุฃููููุงุช ุงูุฑุจุท
**ุงูุญู:** ุชุฃูุฏ ูู ุชุทุจูู ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃููุงู

### ูุดููุฉ: ูุง ูููู ุชูุนูู ุฑุจุท ุญุณุงุจ
**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ุงูุญุณุงุจ ูู ููุน ุฑุฆูุณู (`is_header: true`)
2. ุงูุญุณุงุจ ูู ููุน ุงููุธุงู (`is_system: true`)
3. ุฑูุฒ ุงูุญุณุงุจ ูุง ูุชุทุงุจู ูุน ุงูููุงุนุฏ ุงูุงูุชุฑุงุถูุฉ

### ูุดููุฉ: ูุดู ูู ุญูุธ ุงูุฅุนุฏุงุฏุงุช
**ุงูุญู:** ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู ูุญุงูุฉ ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงููุชุงุญุฉ

ุงููุธุงู ูููุฑ ุฅุญุตุงุฆูุงุช ุดุงููุฉ:
- **ุฅุฌูุงูู ุงูุญุณุงุจุงุช:** ุงูุนุฏุฏ ุงูููู ููุญุณุงุจุงุช
- **ุญุณุงุจุงุช ุชูุตูููุฉ:** ุงูุญุณุงุจุงุช ุงููุงุจูุฉ ููุญุฑูุฉ
- **ุญุณุงุจุงุช ุฑุฆูุณูุฉ:** ุญุณุงุจุงุช ุงูุชุฌููุน
- **ุญุณุงุจุงุช ุงููุธุงู:** ุงูุญุณุงุจุงุช ุงููุญููุฉ
- **ุฑุจุท ุงูุนููุงุก:** ุนุฏุฏ ุงูุญุณุงุจุงุช ุงููุฑุจูุทุฉ ุจุงูุนููุงุก
- **ุฑุจุท ุงูููุฑุฏูู:** ุนุฏุฏ ุงูุญุณุงุจุงุช ุงููุฑุจูุทุฉ ุจุงูููุฑุฏูู  
- **ุฑุจุท ุงูููุธููู:** ุนุฏุฏ ุงูุญุณุงุจุงุช ุงููุฑุจูุทุฉ ุจุงูููุธููู

## ๐ ุงูุฃูุงู

- ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุทูุจ ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ
- ุญุณุงุจุงุช ุงููุธุงู ูุญููุฉ ูู ุงูุชุนุฏูู
- ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ ูู ุณุฌู ุงููุดุงุท
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุญูุธ

---

**ุชู ุฅูุดุงุก ูุฐุง ุงููุธุงู ูุชุญุณูู ุฅุฏุงุฑุฉ ุดุฌุฑุฉ ุงูุญุณุงุจุงุช ูุชูููู ุฑุจุท ุงูุญุณุงุจุงุช ุจุงูููุงูุงุช ุงููุฎุชููุฉ ุจุทุฑููุฉ ููุธูุฉ ููุฑูุฉ.**
