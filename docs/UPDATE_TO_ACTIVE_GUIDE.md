# ุชุญุฏูุซ ุนููุฏ ุงูุนุฑุงู: ูู "ููุฏ ุงููุฑุงุฌุนุฉ" ุฅูู "ูุดุทุฉ"
# Al-Arraf Contracts Update: "under_review" โ "active"

## ๐ ุงูุชูุงุตูู

- **ุงูุดุฑูุฉ**: ุงูุนุฑุงู ูุชุฃุฌูุฑ ุงูุณูุงุฑุงุช
- **Company ID**: `24bc0b21-4e2d-4413-9842-31719a3669f4`
- **ุงูุนุฏุฏ**: 101 ุนูุฏ
- **ูู**: `under_review` (ููุฏ ุงููุฑุงุฌุนุฉ)
- **ุฅูู**: `active` (ูุดุทุฉ)
- **ุญุฌู ุงูุฏูุนุฉ**: 50 ุนูุฏ
- **ุนุฏุฏ ุงูุฏูุนุงุช**: 3 (50 + 50 + 1)

---

## ๐ ุทุฑู ุงูุชูููุฐ

### ุงูุทุฑููุฉ 1: ุณูุฑูุจุช Node.js ุงูุชููุงุฆู โญ (ุงูููุตู ุจูุง)

**ุงูููู**: `update_to_active.mjs`

```bash
node update_to_active.mjs
```

**ุงููููุฒุงุช**:
- โ ุชููุงุฆู ุจุงููุงูู
- โ ูุญุฏุซ 50 ุนูุฏ ูู ุฏูุนุฉ
- โ ุงูุชุธุงุฑ ุซุงููุชูู ุจูู ุงูุฏูุนุงุช
- โ ุนุฑุถ ุงูุชูุฏู ุงููุจุงุดุฑ
- โ ุฅุญุตุงุฆูุงุช ุชูุตูููุฉ
- โ ูุชููู ุชููุงุฆูุงู ุนูุฏ ุงูุงูุชูุงุก

**ุงููุชูุฌุฉ ุงููุชููุนุฉ**:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ุชุญุฏูุซ ุนููุฏ ุงูุนุฑุงู: ููุฏ ุงููุฑุงุฌุนุฉ โ ูุดุทุฉ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ุงูุฎุทูุฉ 1: ุงูุชุญูู ูู ุนุฏุฏ ุงูุนููุฏ...
โ ุชู ุงูุนุซูุฑ ุนูู 101 ุนูุฏ ุจุญุงูุฉ "ููุฏ ุงููุฑุงุฌุนุฉ"
๐ฆ ุณูุชู ุงูุชุญุฏูุซ ุนูู 3 ุฏูุนุฉ

๐ ุจุฏุก ุงูุชุญุฏูุซ ุงูุชุฏุฑูุฌู...

๐ฆ ุงูุฏูุนุฉ 1:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุชู ุงูุนุซูุฑ ุนูู 50 ุนูุฏ ููุชุญุฏูุซ...
โ ุชู ุชุญุฏูุซ 50 ุนูุฏ ุจูุฌุงุญ
๐ ุงูุฅุฌูุงูู ุงููุญุฏุซ ุญุชู ุงูุขู: 50
๐ ุงููุชุจูู: 51 ุนูุฏ
โณ ุงูุชุธุงุฑ 2 ุซุงููุฉ ูุจู ุงูุฏูุนุฉ ุงูุชุงููุฉ...

๐ฆ ุงูุฏูุนุฉ 2:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุชู ุงูุนุซูุฑ ุนูู 50 ุนูุฏ ููุชุญุฏูุซ...
โ ุชู ุชุญุฏูุซ 50 ุนูุฏ ุจูุฌุงุญ
๐ ุงูุฅุฌูุงูู ุงููุญุฏุซ ุญุชู ุงูุขู: 100
๐ ุงููุชุจูู: 1 ุนูุฏ
โณ ุงูุชุธุงุฑ 2 ุซุงููุฉ ูุจู ุงูุฏูุนุฉ ุงูุชุงููุฉ...

๐ฆ ุงูุฏูุนุฉ 3:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
๐ ุชู ุงูุนุซูุฑ ุนูู 1 ุนูุฏ ููุชุญุฏูุซ...
โ ุชู ุชุญุฏูุซ 1 ุนูุฏ ุจูุฌุงุญ
๐ ุงูุฅุฌูุงูู ุงููุญุฏุซ ุญุชู ุงูุขู: 101
๐ ุงููุชุจูู: 0 ุนูุฏ

๐ ุงูุชูู ุงูุชุญุฏูุซ ุจูุฌุงุญ!
โ ุฅุฌูุงูู ุงูุนููุฏ ุงููุญุฏุซุฉ: 101
```

---

### ุงูุทุฑููุฉ 2: SQL ูุฏูู (ููุฐู 3 ูุฑุงุช)

**ุงูููู**: `.qoder/update_to_active_batch.sql`

#### ุงูุฎุทูุงุช:

1. **ุงูุชุญ Supabase Dashboard**:
   - https://supabase.com/dashboard
   - ุงุฎุชุฑ ูุดุฑูุน Fleetify
   - SQL Editor โ New Query

2. **ุงูุณุฎ ูุฐุง ุงูุงุณุชุนูุงู**:

```sql
-- ุงูุชุญูู ูู ุงูุนุฏุฏ ุฃููุงู
SELECT COUNT(*) FROM contracts
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
  AND status = 'under_review';

-- ุชุญุฏูุซ 50 ุนูุฏ (ููุฐ ูุฐุง 3 ูุฑุงุช)
UPDATE contracts
SET status = 'active', updated_at = NOW()
WHERE id IN (
    SELECT id FROM contracts 
    WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
      AND status = 'under_review'
    LIMIT 50
);

-- ุชุญูู ูู ุงููุชุจูู
SELECT COUNT(*) as remaining FROM contracts
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
  AND status = 'under_review';
```

3. **ููุฐ ุงูุชุญุฏูุซ 3 ูุฑุงุช**:
   - ุงููุฑุฉ 1: ูุญุฏุซ 50 ุนูุฏ (ูุชุจูู: 51)
   - ุงููุฑุฉ 2: ูุญุฏุซ 50 ุนูุฏ (ูุชุจูู: 1)
   - ุงููุฑุฉ 3: ูุญุฏุซ 1 ุนูุฏ (ูุชุจูู: 0)

---

### ุงูุทุฑููุฉ 3: SQL ูุชูุฏู (ูุณุฎ ููุตู ูุงุญุฏ)

**ุงูููู**: `.qoder/update_to_active_complete.sql`

**ุงูุฎุทูุงุช**:
1. ุงูุชุญ ุงูููู `.qoder/update_to_active_complete.sql`
2. ุงูุณุฎ ุงููุญุชูู ูุงููุงู
3. ุงูุตูู ูู Supabase SQL Editor
4. ุงุถุบุท Run ูุฑุฉ ูุงุญุฏุฉ

ุณูุชู ุชูููุฐ ุฌููุน ุงูุฏูุนุงุช ุงูู 3 ุชููุงุฆูุงู ูุน ุนุฑุถ ุงูุชูุฏู!

---

## ๐ ุงูุชุญูู ูู ุงููุชุงุฆุฌ

### ุงุณุชุนูุงู ุงูุชุญูู ุงูุณุฑูุน:

```sql
-- ุชูุฒูุน ุงูุนููุฏ ุญุณุจ ุงูุญุงูุฉ
SELECT 
    status,
    COUNT(*) as count,
    ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 2) || '%' as percentage
FROM contracts
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
GROUP BY status
ORDER BY count DESC;
```

### ุงูุชุญูู ูู ุงูุชุญุฏูุซุงุช ุงูุฃุฎูุฑุฉ:

```sql
-- ุงูุนููุฏ ุงูุชู ุชู ุชุญุฏูุซูุง ูู ุขุฎุฑ 10 ุฏูุงุฆู
SELECT 
    contract_number,
    status,
    updated_at
FROM contracts
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
  AND status = 'active'
  AND updated_at >= NOW() - INTERVAL '10 minutes'
ORDER BY updated_at DESC;
```

---

## ๐ ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุจู ุงูุชุญุฏูุซ:
| ุงูุญุงูุฉ | ุงูุนุฏุฏ |
|--------|-------|
| ููุฏ ุงููุฑุงุฌุนุฉ | 101 |
| ูุดุทุฉ | X |
| ุฃุฎุฑู | ... |

### ุจุนุฏ ุงูุชุญุฏูุซ:
| ุงูุญุงูุฉ | ุงูุนุฏุฏ |
|--------|-------|
| ููุฏ ุงููุฑุงุฌุนุฉ | 0 |
| ูุดุทุฉ | X + 101 |
| ุฃุฎุฑู | ... |

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ูุง ูููู ุงูุชุฑุงุฌุน**: ุงูุชุญุฏูุซ ุฏุงุฆูุ ุชุฃูุฏ ูุจู ุงูุชูููุฐ
2. **ุงููุณุฎ ุงูุงุญุชูุงุทู**: ูุชููุฑ ุชููุงุฆูุงู ูู Supabase
3. **ุงูุชุฃุซูุฑ**: ุณูุคุซุฑ ุนูู:
   - โ ุฅุญุตุงุฆูุงุช ุงูุนููุฏ ูู Dashboard
   - โ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
   - โ ุงูููุงุชุฑ ูุงูุจุญุซ

---

## ๐ ุงูุฑุฌูุน ุนู ุงูุชุญุฏูุซ (ุฅุฐุง ูุฒู ุงูุฃูุฑ)

ุฅุฐุง ุงุญุชุฌุช ุฅุฑุฌุงุน ุงูุนููุฏ ูุญุงูุฉ "ููุฏ ุงููุฑุงุฌุนุฉ":

```sql
-- โ๏ธ ุงุณุชุฎุฏู ุจุญุฐุฑ! ููุท ููุทูุงุฑุฆ
UPDATE contracts
SET status = 'under_review', updated_at = NOW()
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
  AND status = 'active'
  AND updated_at >= NOW() - INTERVAL '1 hour'; -- ููุท ุงููุญุฏุซุฉ ูู ุขุฎุฑ ุณุงุนุฉ
```

---

## ๐ ุงููููุงุช ุงููุชุงุญุฉ

1. **update_to_active.mjs** - ุณูุฑูุจุช Node.js ุชููุงุฆู
2. **.qoder/update_to_active_batch.sql** - SQL ูุฏูู (3 ูุฑุงุช)
3. **.qoder/update_to_active_complete.sql** - SQL ูุชูุฏู (ูุฑุฉ ูุงุญุฏุฉ)
4. **UPDATE_TO_ACTIVE_GUIDE.md** - ูุฐุง ุงูููู

---

## โฑ๏ธ ุงูููุช ุงููุชููุน

| ุงูุทุฑููุฉ | ุงูููุช |
|---------|-------|
| Node.js Script | 1-2 ุฏูููุฉ |
| SQL ูุฏูู (3ร) | 1-2 ุฏูููุฉ |
| SQL ูุชูุฏู | 30-60 ุซุงููุฉ |

---

## ๐ ุงุจุฏุฃ ุงูุขู!

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ (Node.js):
```bash
cd c:\Users\khamis\Desktop\fleetifyapp-3
node update_to_active.mjs
```

### ุงูุทุฑููุฉ ุงููุฏููุฉ (Supabase):
1. ุงูุชุญ: https://supabase.com/dashboard
2. SQL Editor โ New Query
3. ุงูุณุฎ ูู: `.qoder/update_to_active_batch.sql`
4. Run ร 3 ูุฑุงุช

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ุชู ุงูุชุญูู ูู ุนุฏุฏ ุงูุนููุฏ (101)
- [ ] ุชู ุงุฎุชูุงุฑ ุงูุทุฑููุฉ ุงูููุงุณุจุฉ
- [ ] ุชู ุชูููุฐ ุงูุณูุฑูุจุช
- [ ] ุชู ุงูุชุญูู ูู ุงููุชุงุฆุฌ
- [ ] ุชู ุชุญุฏูุซ Dashboard

---

**ุงูุญุงูุฉ**: โณ ุฌุงูุฒ ููุชูููุฐ  
**ุงูุชุงุฑูุฎ**: 2025-10-26  
**ุงูุฃููููุฉ**: ูุชูุณุทุฉ  
**ุงููุฏู**: ุชุญููู 101 ุนูุฏ ูู "ููุฏ ุงููุฑุงุฌุนุฉ" โ "ูุดุทุฉ"
