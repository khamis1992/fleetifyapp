# ุฏููู ูุธุงู ุฅุฏุงุฑุฉ ุนูุงูุงุช ุงูุนููุงุก (CRM)

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฏูุฌ ูุธุงู CRM ุดุงูู ูุน FleetifyApp ูุชุชุจุน ุฌููุน ุงูุชูุงุตูุงุช ูุน ุงูุนููุงุก ูุฅุฏุงุฑุฉ ุงููุชุงุจุนุงุช ุจุดูู ุงุญุชุฑุงูู.

---

## ๐ฏ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. **ุฅุญุตุงุฆูุงุช ูุจุงุดุฑุฉ**
- ุนุฏุฏ ุงูุนููุงุก ุงููุดุทูู
- ุนุฏุฏ ุงูููุงููุงุช ุงูููู
- ุงููุชุงุจุนุงุช ุงููุนููุฉ
- ุงูุนูููุงุช ุงูููุชููุฉ ูุฐุง ุงูุดูุฑ

### 2. **ุฅุฏุงุฑุฉ ุงูุนููุงุก**
- ุนุฑุถ ุฌููุน ุงูุนููุงุก ุฐูู ุงูุนููุฏ ุงููุดุทุฉ
- ูุนูููุงุช ุชูุตูููุฉ ููู ุนููู:
  - ุงูุงุณู ูุฑูู ุงูุฌูุงู
  - ุฑูู ุงูุนูุฏ ูุชุงุฑูุฎ ุงูุงูุชูุงุก
  - ุขุฎุฑ ููุนุฏ ุงุชุตุงู
  - ุญุงูุฉ ุงูุนูุฏ (ูุดุท/ูุฑูุจ ุงูุงูุชูุงุก/ููุชูู)

### 3. **ุณุฌู ุงูุชูุงุตู**
- ุชุณุฌูู ุฌููุน ุฃููุงุน ุงูุชูุงุตู:
  - ๐ **ููุงููุงุช ูุงุชููุฉ** (ูุน ุชุณุฌูู ุงููุฏุฉ)
  - ๐ฑ **ุฑุณุงุฆู SMS**
  - ๐ฅ **ุงุฌุชูุงุนุงุช**
  - ๐ **ููุงุญุธุงุช ุนุงูุฉ**

### 4. **ุฅุฏุงุฑุฉ ุงููุชุงุจุนุงุช**
- ุฌุฏููุฉ ูุชุงุจุนุงุช ูุณุชูุจููุฉ
- ุชุชุจุน ุญุงูุฉ ุงููุชุงุจุนุงุช (ูุนููุฉ/ููุชููุฉ/ููุบูุฉ)
- ุชูุจููุงุช ุชููุงุฆูุฉ ูููุชุงุจุนุงุช ุงููุนููุฉ
- ุชุญุฏูุฏ ุงูุฅุฌุฑุงุกุงุช ุงููุทููุจุฉ:
  - ุฅุนุฏุงุฏ ุนุฑุถ ุณุนุฑ
  - ุชุฌููุฒ ุนูุฏ ุฌุฏูุฏ
  - ูุชุงุจุนุฉ ุฏูุนุฉ
  - ุฌุฏููุฉ ุตูุงูุฉ
  - ุชุฌุฏูุฏ ุงูุนูุฏ

### 5. **ุชูุจููุงุช ุฐููุฉ**
- ุชุญุฐูุฑุงุช ููุนููุงุก ุงูุฐูู ูุญุชุงุฌูู ูุชุงุจุนุฉ ุนุงุฌูุฉ
- ุฅุดุนุงุฑุงุช ููุนููุฏ ุงููุฑูุจุฉ ูู ุงูุงูุชูุงุก
- ูุคุดุฑุงุช ุจุตุฑูุฉ ููุญุงูุงุช ุงููุฎุชููุฉ

---

## ๐ ุจููุฉ ุงููููุงุช

```
src/
โโโ types/
โ   โโโ crm.ts                          # ููุงุฐุฌ ุงูุจูุงูุงุช
โโโ pages/
โ   โโโ customers/
โ       โโโ CustomerCRM.tsx              # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โโโ hooks/
โ   โโโ useCustomerCRM.ts                # Hooks ููุจูุงูุงุช
โโโ navigation/
โ   โโโ navigationConfig.ts              # ุงูุชููู (ูุญุฏุซ)
โโโ App.tsx                              # Routes (ูุญุฏุซ)

supabase/
โโโ migrations/
    โโโ create_customer_communications_table.sql  # Migration ููุฌุฏูู
```

---

## ๐๏ธ ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `customer_communications`

```sql
- id: UUID (Primary Key)
- customer_id: UUID (Foreign Key โ customers)
- company_id: UUID (Foreign Key โ companies)
- communication_type: TEXT ('phone', 'message', 'meeting', 'note')
- communication_date: DATE
- communication_time: TIME
- duration_minutes: INTEGER (ููููุงููุงุช)
- employee_id: UUID (Foreign Key โ auth.users)
- notes: TEXT
- action_required: TEXT
- action_description: TEXT
- follow_up_scheduled: BOOLEAN
- follow_up_date: DATE
- follow_up_time: TIME
- follow_up_status: TEXT ('pending', 'completed', 'cancelled')
- attachments: JSONB
- created_at: TIMESTAMPTZ
- updated_at: TIMESTAMPTZ
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. **ุชุทุจูู Migration ูุงุนุฏุฉ ุงูุจูุงูุงุช**

```bash
# ูู Supabase Dashboard SQL Editor
supabase/migrations/create_customer_communications_table.sql
```

ุฃู ุงุณุชุฎุฏู:
```bash
supabase db push
```

### 2. **ุงููุตูู ููุตูุญุฉ**

ุจุนุฏ ุชุดุบูู ุงููุธุงู:
1. ุณุฌู ุงูุฏุฎูู ูููุธุงู
2. ูู ุงูุณุงูุฏ ุจุงุฑ โ **ุฅุฏุงุฑุฉ ุงูุนููุงุก**
3. ุงุฎุชุฑ **ุฅุฏุงุฑุฉ ุงูุนูุงูุงุช (CRM)**

ุงููุณุงุฑ ุงููุจุงุดุฑ:
```
/customers/crm
```

### 3. **ุฅุถุงูุฉ ูุชุงุจุนุฉ ุฌุฏูุฏุฉ**

1. ุงุถุบุท ุนูู ุฒุฑ **"+ ูุชุงุจุนุฉ ุฌุฏูุฏุฉ"** ูู ุฃุนูู ุงูุตูุญุฉ
   ุฃู
2. ุงุถุบุท ุนูู **"ุฅุถุงูุฉ ููุงุญุธุฉ"** ูู ุจุทุงูุฉ ุงูุนููู

3. ุงููุฃ ุงููููุฐุฌ:
   - ุงุฎุชุฑ ููุน ุงูุชูุงุตู
   - ุญุฏุฏ ุงูุชุงุฑูุฎ ูุงูููุช
   - ุงูุชุจ ุงูููุงุญุธุงุช ุงูุชูุตูููุฉ
   - (ุงุฎุชูุงุฑู) ุญุฏุฏ ุงูุฅุฌุฑุงุก ุงููุทููุจ
   - (ุงุฎุชูุงุฑู) ุฌุฏูู ูุชุงุจุนุฉ ูุงุฏูุฉ

4. ุงุถุบุท **"ุญูุธ ุงููุชุงุจุนุฉ"**

### 4. **ุนุฑุถ ุณุฌู ุงูุชูุงุตู**

1. ูู ุจุทุงูุฉ ุงูุนูููุ ุงุถุบุท **"ุนุฑุถ ุงูุณุฌู"**
2. ุณูุธูุฑ Timeline ุจุฌููุน ุงููุชุงุจุนุงุช ุงูุณุงุจูุฉ
3. ููููู ุชุนุฏูู ุฃู ุญุฐู ุฃู ูุชุงุจุนุฉ

---

## ๐จ ุงูุชุตููู ูุงููุงุฌูุฉ

### ูุธุงู ุงูุฃููุงู

- **ุงูุฃุณุงุณู (Primary):** ุฃุฎุถุฑ ุงุญุชุฑุงูู `#22C55E` - ูููุฌุงุญ ูุงูุนูููุงุช ุงูุฅูุฌุงุจูุฉ
- **ุงูุชุญุฐูุฑ (Warning):** ุจุฑุชูุงูู `#F59E0B` - ูููุชุงุจุนุงุช ุงููุนููุฉ
- **ุงูุฎุทุฑ (Danger):** ุฃุญูุฑ `#EF4444` - ููุญุงูุงุช ุงูุนุงุฌูุฉ
- **ุงููุนูููุงุช (Info):** ุฃุฒุฑู `#3B82F6` - ูููุนูููุงุช ุงูุนุงูุฉ

### ุงูุญุฑูุงุช ูุงูุชุฃุซูุฑุงุช

- ุชุญููู ุงูุตูุญุฉ: `fade-in 500ms`
- ุงูุจุทุงูุงุช: `slide-in-from-bottom` ูุน `stagger 50ms`
- Hover: `shadow-lg transition-all 300ms`
- Timeline: `slide-in-from-top 300ms`

---

## ๐ง Hooks ุงููุชุงุญุฉ

### `useCRMStats(companyId)`
ุฌูุจ ุฅุญุตุงุฆูุงุช CRM ุงูุดุงููุฉ

```typescript
const { data: stats, isLoading } = useCRMStats(selectedCompanyId);
// Returns: CRMStats
```

### `useCRMCustomers(companyId)`
ุฌูุจ ูุงุฆูุฉ ุงูุนููุงุก ูุน ูุนูููุงุช CRM

```typescript
const { data: customers, isLoading } = useCRMCustomers(selectedCompanyId);
// Returns: CRMCustomer[]
```

### `useCustomerCommunications(customerId, companyId)`
ุฌูุจ ุณุฌู ุงูุชูุงุตู ูุนููู ูุญุฏุฏ

```typescript
const { data: communications } = useCustomerCommunications(customerId, companyId);
// Returns: CustomerCommunication[]
```

### `useAddCommunication(companyId)`
ุฅุถุงูุฉ ูุชุงุจุนุฉ ุฌุฏูุฏุฉ

```typescript
const addComm = useAddCommunication(companyId);
await addComm.mutateAsync(input);
```

### `useUpdateCommunicationStatus(companyId)`
ุชุญุฏูุซ ุญุงูุฉ ูุชุงุจุนุฉ

```typescript
const updateStatus = useUpdateCommunicationStatus(companyId);
await updateStatus.mutateAsync({ communicationId, status });
```

### `useDeleteCommunication(companyId)`
ุญุฐู ูุชุงุจุนุฉ

```typescript
const deleteCom = useDeleteCommunication(companyId);
await deleteCom.mutateAsync(communicationId);
```

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### Row Level Security (RLS)

ุชู ุชุทุจูู ุณูุงุณุงุช RLS ุงูุชุงููุฉ:

1. **SELECT:** ุงููุณุชุฎุฏููู ูููููู ุฑุคูุฉ ูุชุงุจุนุงุช ุงูุดุฑูุฉ ุงูุชู ููุชููู ุฅูููุง ููุท
2. **INSERT:** ุงููุณุชุฎุฏููู ูููููู ุฅุถุงูุฉ ูุชุงุจุนุงุช ูุดุฑูุชูู ููุท
3. **UPDATE:** ุงููุณุชุฎุฏููู ูููููู ุชุญุฏูุซ ูุชุงุจุนุงุชูู ุงูุฎุงุตุฉ ููุท
4. **DELETE:** ุงููุณุชุฎุฏููู ูููููู ุญุฐู ูุชุงุจุนุงุชูู ุงูุฎุงุตุฉ ุฃู (ุงููุฏูุฑูู/ุงููุงูููู)

---

## ๐ ุงูููุงุชุฑ ุงููุชุงุญุฉ

### 1. ุงูุจุญุซ ุงููุตู
- ุงูุจุญุซ ุจุงูุงุณู
- ุงูุจุญุซ ุจุฑูู ุงูุฌูุงู
- ุงูุจุญุซ ุจุฑูู ุงูุนูุฏ

### 2. ุญุงูุฉ ุงูุนูุฏ
- ุงููู
- ุนููุฏ ูุดุทุฉ
- ูุฑูุจุฉ ูู ุงูุงูุชูุงุก
- ููุชููุฉ

### 3. ุขุฎุฑ ููุนุฏ ุงุชุตุงู
- ุงูููู
- ุขุฎุฑ 7 ุฃูุงู
- ุขุฎุฑ 30 ููู
- ุฃูุซุฑ ูู ุดูุฑ
- ุงููู

---

## ๐จ ุงูุชูุจููุงุช ุงูุฐููุฉ

### ุชูุจููุงุช ุชููุงุฆูุฉ ููุนููุงุก ุงูุฐูู:
1. โ ุงูุนูุฏ ููุชูู ุฎูุงู 10 ุฃูุงู ุฃู ุฃูู
2. โ๏ธ ูู ูุชู ุงูุงุชุตุงู ุจูู ููุฐ ุฃุณุจูุน
3. ๐ด ุงูุนูุฏ ููุชูู ููู ูุชู ุชุฌุฏูุฏู

---

## ๐ฏ ุฎุทุท ุงูุชุทููุฑ ุงููุณุชูุจููุฉ

### ุงููุฑุญูุฉ ุงูุซุงููุฉ
- [ ] ุชูุงุฑูุฑ CRM ุชูุตูููุฉ
- [ ] ุชุตุฏูุฑ ุณุฌู ุงูุชูุงุตู ุฅูู Excel/PDF
- [ ] ุฅุฑุณุงู SMS ุชููุงุฆู ูู ุงููุธุงู
- [ ] ุชุณุฌูู ุงูููุงููุงุช (ุงุฎุชูุงุฑู)
- [ ] ุชูุงูู ูุน WhatsApp Business API
- [ ] ููุญุฉ ุชุญูู CRM ูุณุชููุฉ

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ
- [ ] AI ูุงูุชุฑุงุญ ุฃูุถู ุฃููุงุช ุงูุงุชุตุงู
- [ ] ุชุญููู ุณููู ุงูุนููุงุก
- [ ] ูุธุงู ุงูููุงุท ูุงูููุงูุขุช
- [ ] ุชูุงูู ูุน Email Marketing

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. โ ุงููุธุงู ูุชูุงูู ุจุงููุงูู ูุน `useUnifiedCompanyAccess` ููุชุนุงูู ูุน ุดุฑูุงุช ูุชุนุฏุฏุฉ
2. โ ุฌููุน ุงูุจูุงูุงุช ูุญููุฉ ุจู RLS
3. โ ุงูุชุตููู ูุชุฌุงูุจ ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ
4. โ ูุฏุนู RTL (ูู ุงููููู ูููุณุงุฑ)
5. โ ุงุณุชุฎุฏุงู React Query ููุชุฎุฒูู ุงููุคูุช ูุชุญุณูู ุงูุฃุฏุงุก

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชุธูุฑ ุงูุจูุงูุงุช
**ุงูุญู:**
1. ุชุฃูุฏ ูู ุชุทุจูู Migration ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุชุญูู ูู ุงุฎุชูุงุฑ ุงูุดุฑูุฉ ุงูุตุญูุญุฉ
3. ุชุฃูุฏ ูู ูุฌูุฏ ุนููุฏ ูุดุทุฉ

### ุงููุดููุฉ: ุฎุทุฃ ูู RLS
**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ููุฌูุฏ ูู `company_users`
2. ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
3. ุฑุงุฌุน ุณูุงุณุงุช RLS ูู Supabase Dashboard

### ุงููุดููุฉ: ูุง ูููู ุญูุธ ุงููุชุงุจุนุฉ
**ุงูุญู:**
1. ุชุญูู ูู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ
2. ุชุญูู ูู ุตูุงุญูุงุช ุงูุฅุถุงูุฉ
3. ุฑุงุฌุน Console ููุฃุฎุทุงุก

---

## ๐จโ๐ป ุงููุทูุฑ

ุชู ุชุทููุฑ ูุฐุง ุงููุธุงู ุจูุงุณุทุฉ **Cursor AI + Claude Sonnet 4.5**

ุงูุชุงุฑูุฎ: **ููููุจุฑ 2025**

ุงูุฅุตุฏุงุฑ: **1.0.0**

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ุฑุงุฌุน ุงูุชูุซูู ุงููุงูู ูู ุงููุดุฑูุน
- ุชุญูู ูู ููู `src/types/crm.ts` ููู Type Definitions
- ุฑุงุฌุน `src/hooks/useCustomerCRM.ts` ูุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

---

**๐ ูุธุงู CRM ุฌุงูุฒ ููุงุณุชุฎุฏุงู!**


