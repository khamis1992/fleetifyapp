# ุฏููู ูุธุงู ุชุชุจุน ุงููุถุงูุง ุงููุงููููุฉ | Legal Cases Tracking System Guide

## ๐ ูุธุฑุฉ ุนุงูุฉ | Overview

ูุธุงู ุชุชุจุน ุงููุถุงูุง ุงููุงููููุฉ ูู ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ููุชุงุจุนุฉ ุฌููุน ุงููุถุงูุง ุงููุงููููุฉ ููุดุฑูุฉ.

---

## ๐ฏ ููู ูุนูู ุงููุธุงู | How The System Works

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ

**ุฌุฏูู ุงููุถุงูุง** (`legal_cases`):
- **ูุนุฑู ุงููุถูุฉ**: ุฑูู ุชููุงุฆู ูุซู `LC-2025-001`
- **ูุนูููุงุช ุงููุถูุฉ**: ุงูุนููุงูุ ุงูููุนุ ุงูุญุงูุฉุ ุงูุฃููููุฉ
- **ูุนูููุงุช ุงูุนููู**: ุฑุจุท ุจุฌุฏูู ุงูุนููุงุก ุฃู ุฅุฏุฎุงู ูุฏูู
- **ูุนูููุงุช ุงููุญููุฉ**: ุงุณู ุงููุญููุฉุ ุฑูู ูุฑุฌุนูุ ููุงุนูุฏ ุงูุฌูุณุงุช
- **ุงูุชูุงููู**: ุฃุชุนุงุจ ูุญุงูุงุฉุ ุฑุณูู ูุญููุฉุ ูุตุงุฑูู ุฃุฎุฑู
- **ุงููุฑูู ุงููุงูููู**: ุงููุญุงูู ุงูุฑุฆูุณู ูุงููุฑูู

**ุฌุฏูู ุงูุฌูุณุงุช ุงููุถุงุฆูุฉ** (`court_sessions`):
- ุชุณุฌูู ูู ุฌูุณุฉ ูุญููุฉ
- ูุชูุฌุฉ ุงูุฌูุณุฉ
- ููุนุฏ ุงูุฌูุณุฉ ุงููุงุฏูุฉ
- ุงููุณุชูุฏุงุช ุงููุฑููุฉ

### 2. ุฃููุงุน ุงููุถุงูุง ุงููุฏุนููุฉ

| ุงูููุน | ุงูุงุณุชุฎุฏุงู |
|------|----------|
| `civil` - ูุฏูู | ุชุญุตูู ุฏูููุ ูุถุงูุง ูุฏููุฉ ุนุงูุฉ |
| `criminal` - ุฌูุงุฆู | ูุถุงูุง ุฌูุงุฆูุฉุ ุณุฑูุฉุ ุงุญุชูุงู |
| `commercial` - ุชุฌุงุฑู | ูุฒุงุนุงุช ุชุฌุงุฑูุฉุ ุนููุฏ |
| `labor` - ุนูุงูู | ูุถุงูุง ููุธููู |
| `traffic` - ูุฑูุฑู | ูุฎุงููุงุช ูุฑูุฑูุฉ |
| `rental` - ุฅูุฌุงุฑ | ูุฒุงุนุงุช ุฅูุฌุงุฑ |

### 3. ุญุงูุงุช ุงููุถูุฉ

- **ูุดุทุฉ** (`active`): ุงููุถูุฉ ูู ุงููุญููุฉ
- **ูุบููุฉ** (`closed`): ุตุฏุฑ ุญูู ููุงุฆู
- **ูุนููุฉ** (`suspended`): ุชู ุชุนููู ุงููุถูุฉ
- **ููุฏ ุงูุงูุชุธุงุฑ** (`on_hold`): ูู ุงูุชุธุงุฑ ุฅุฌุฑุงุก

### 4. ูุณุชููุงุช ุงูุฃููููุฉ

- **ุนุงุฌู** (`urgent`): ุฌูุณุฉ ุฎูุงู 24-48 ุณุงุนุฉ
- **ุนุงูู** (`high`): ุฌูุณุฉ ุฎูุงู ุฃุณุจูุน
- **ูุชูุณุท** (`medium`): ุฌูุณุฉ ุฎูุงู ุดูุฑ
- **ููุฎูุถ** (`low`): ูุง ุชูุฌุฏ ุฌูุณุฉ ูุฑูุจุฉ

---

## ๐ป ููููุฉ ุงูุงุณุชุฎุฏุงู | How To Use

### 1. ุฅุถุงูุฉ ูุถูุฉ ุฌุฏูุฏุฉ

```typescript
// ุงุณุชุฏุนุงุก Hook
import { useCreateLegalCase } from '@/hooks/useLegalCases';

const createCase = useCreateLegalCase();

// ุฅูุดุงุก ูุถูุฉ
await createCase.mutateAsync({
  case_title: "ุชุญุตูู ุฏููู ูู ุดุฑูุฉ ุงูุฎููุฌ",
  case_type: "civil",              // ูุฏูู
  priority: "high",                 // ุฃููููุฉ ุนุงููุฉ
  case_status: "active",            // ูุดุทุฉ
  client_name: "ุดุฑูุฉ ุงูุฎููุฌ",
  court_name: "ูุญููุฉ ุงููููุช ุงููููุฉ",
  filing_date: "2025-10-01",
  hearing_date: "2025-11-15",
  case_value: 50000,                // ูููุฉ ุงููุถูุฉ
  legal_fees: 5000,                 // ุฃุชุนุงุจ ุงููุญุงูุงุฉ
  court_fees: 500,                  // ุฑุณูู ุงููุญููุฉ
  other_expenses: 200               // ูุตุงุฑูู ุฃุฎุฑู
});
```

**ุงููุชูุฌุฉ**:
- ูุชู ุชูููุฏ ุฑูู ูุถูุฉ ุชููุงุฆู: `LC-2025-001`
- ูุญุณุจ ุฅุฌูุงูู ุงูุชูุงููู ุชููุงุฆูุงู: 5,700 ุฏ.ู
- ูุชู ุชุณุฌูู ูุดุงุท ูู ุณุฌู ุงูุฃูุดุทุฉ

### 2. ุนุฑุถ ุงููุถุงูุง

```typescript
import { useLegalCases } from '@/hooks/useLegalCases';

// ุฌูุจ ุฌููุน ุงููุถุงูุง
const { data: cases } = useLegalCases();

// ููุชุฑุฉ ุงููุถุงูุง ุงููุดุทุฉ ููุท
const { data: activeCases } = useLegalCases({
  case_status: 'active'
});

// ููุชุฑุฉ ุงููุถุงูุง ุงููุฏููุฉ ุนุงููุฉ ุงูุฃููููุฉ
const { data: urgentCivil } = useLegalCases({
  case_status: 'active',
  case_type: 'civil',
  priority: 'high'
});

// ุงูุจุญุซ ูู ุงููุถุงูุง
const { data: searchResults } = useLegalCases({
  search: 'ุงูุฎููุฌ'  // ูุจุญุซ ูู ุฑูู ุงููุถูุฉุ ุงูุนููุงูุ ุงุณู ุงูุนููู
});
```

### 3. ุงูุฅุญุตุงุฆูุงุช

```typescript
import { useLegalCaseStats } from '@/hooks/useLegalCases';

const { data: stats } = useLegalCaseStats();

// ุงููุชูุฌุฉ:
{
  total: 45,              // ุฅุฌูุงูู ุงููุถุงูุง
  active: 32,             // ุงููุดุทุฉ
  closed: 10,             // ุงููุบููุฉ
  suspended: 2,           // ุงููุนููุฉ
  highPriority: 12,       // ุนุงููุฉ ุงูุฃููููุฉ
  totalValue: 1250000,    // ุฅุฌูุงูู ุงูุชูุงููู
  pendingBilling: 8,      // ููุงุชูุฑ ูุนููุฉ
  overduePayments: 3,     // ูุฏููุนุงุช ูุชุฃุฎุฑุฉ
  byType: {
    civil: 20,
    criminal: 5,
    commercial: 10
  }
}
```

### 4. ุชุญุฏูุซ ูุถูุฉ

```typescript
import { useUpdateLegalCase } from '@/hooks/useLegalCases';

const updateCase = useUpdateLegalCase();

// ุชุญุฏูุซ ุญุงูุฉ ุงููุถูุฉ
await updateCase.mutateAsync({
  id: caseId,
  data: {
    case_status: "closed",
    notes: "ุชู ุงูุญูู ูุตุงูุญ ุงูุดุฑูุฉ ุจูุจูุบ 50,000 ุฏ.ู"
  }
});

// ุชุญุฏูุซ ููุนุฏ ุงูุฌูุณุฉ
await updateCase.mutateAsync({
  id: caseId,
  data: {
    hearing_date: "2025-12-01",
    notes: "ุชู ุชุฃุฌูู ุงูุฌูุณุฉ"
  }
});
```

---

## ๐ ุงูุชูุงูู ูุน ุงูุฃูุธูุฉ ุงูุฃุฎุฑู | System Integration

### 1. ูุธุงู ุงูุนููุงุก

ุนูุฏ ุฑุจุท ูุถูุฉ ุจุนููู:
- ูุคุซุฑ ุนูู **ุชูููู ุงููุฎุงุทุฑ** ููุนููู
- ูุธูุฑ ูู **ุณุฌู ุงูุนููู ุงููุงูููู**
- ูุฏ ูุคุฏู ูุฅุฏุฑุงุฌ ุงูุนููู ูู **ุงููุงุฆูุฉ ุงูุณูุฏุงุก** (ุฅุฐุง ูุงูุช ูุถุงูุง ูุชุนุฏุฏุฉ)

```typescript
const case = {
  client_id: "customer-uuid",  // ูุฑุจุท ุจุฌุฏูู ุงูุนููุงุก
  // ... ุจุงูู ุงูุจูุงูุงุช
};
```

### 2. ุงููุธุงู ุงููุงูู

ุงูุชูุงููู ุชุณุฌู ูู ุงููุธุงู ุงููุงูู:
- **ุฃุชุนุงุจ ุงููุญุงูุงุฉ** โ ุญุณุงุจ ูุตุฑููุงุช ูุงููููุฉ
- **ุฑุณูู ุงููุญููุฉ** โ ุญุณุงุจ ุฑุณูู ุฑุณููุฉ
- **ูุตุงุฑูู ุฃุฎุฑู** โ ุญุณุงุจ ูุตุฑููุงุช ูุชููุนุฉ

```typescript
const costs = {
  legal_fees: 5000,        // ูุตุฑูู ูุงูููู
  court_fees: 500,         // ุฑุณูู ุฑุณููุฉ
  other_expenses: 200,     // ูุตุงุฑูู ูุชููุนุฉ
  billing_status: "pending" // ุญุงูุฉ ุงูููุงุชูุฑ
};
```

### 3. ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงููุงูููู

ูููู ุงุณุชุฎุฏุงู Legal AI ูู:
- ุชุญููู ุงููุถูุฉ ูุชูููู ูุฑุต ุงููุฌุงุญ
- ุชูููุฏ ุงููุณุชูุฏุงุช ุงููุงููููุฉ (ุฅูุฐุงุฑุงุชุ ูุฐูุฑุงุช)
- ุงูุจุญุซ ูู ุณูุงุจู ูุงููููุฉ
- ุงูุชูุตูุฉ ุจุฃูุถู ุงูุฅุฌุฑุงุกุงุช

---

## ๐ ุณูุฑ ุงูุนูู ุงููููุฐุฌู | Standard Workflow

### ูุซุงู: ูุถูุฉ ุชุญุตูู ุฏููู

**ุงููุฑุญูุฉ 1 - ุงูุฅูุดุงุก**:
```typescript
{
  case_number: "LC-2025-015",  // ุชููุงุฆู
  case_title: "ุชุญุตูู ุฅูุฌุงุฑุงุช ูุชุฃุฎุฑุฉ",
  case_type: "civil",
  priority: "high",
  case_status: "active",
  client_name: "ุดุฑูุฉ ุงูููุฑ",
  case_value: 75000,           // ุงููุจูุบ ุงููุทุงูุจ ุจู
  filing_date: "2025-10-20"
}
```

**ุงููุฑุญูุฉ 2 - ุงูุฌูุณุฉ ุงูุฃููู** (ุจุนุฏ 35 ููู):
```typescript
// ูู ุฌุฏูู court_sessions
{
  session_number: 1,
  session_date: "2025-11-25",
  outcome: "adjourned",        // ุชุฃุฌูู
  next_session_date: "2025-12-20",
  notes: "ุชุฃุฌูู ูุญุถูุฑ ุงูุทุฑู ุงูุขุฎุฑ"
}
```

**ุงููุฑุญูุฉ 3 - ุงูุฌูุณุฉ ุงูุซุงููุฉ** (ุจุนุฏ 25 ููู):
```typescript
{
  session_number: 2,
  session_date: "2025-12-20",
  outcome: "judgment_issued",  // ุตุฏูุฑ ุญูู
  notes: "ุงูุญูู ูุตุงูุญ ุงูุดุฑูุฉ ุจูุจูุบ 75,000 ุฏ.ู"
}
```

**ุงููุฑุญูุฉ 4 - ุงูุฅุบูุงู**:
```typescript
// ุชุญุฏูุซ ุงููุถูุฉ
{
  case_status: "closed",
  notes: "ุชู ุงูุญูู ูุตุงูุญ ุงูุดุฑูุฉุ ุฌุงุฑู ุงูุชูููุฐ"
}
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู | User Interface

### ุตูุญุฉ ุงูุชุชุจุน: `/legal/cases-tracking`

**ุงูููููุงุช ุงูุฑุฆูุณูุฉ**:

1. **ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช** (4 ุจุทุงูุงุช):
   - ุฅุฌูุงูู ุงููุถุงูุง
   - ูุถุงูุง ุนุงููุฉ ุงูุฃููููุฉ
   - ุฅุฌูุงูู ุงูุชูุงููู
   - ูุฏููุนุงุช ูุชุฃุฎุฑุฉ

2. **ุฃุฏูุงุช ุงูุจุญุซ ูุงูููุชุฑุฉ**:
   - ุญูู ุจุญุซ ูุตู
   - ููุชุฑ ุญุณุจ ุงูุญุงูุฉ (ูุดุทุฉุ ูุบููุฉุ ูุนููุฉ)
   - ููุชุฑ ุญุณุจ ุงูููุน (ูุฏููุ ุฌูุงุฆูุ ุชุฌุงุฑู...)

3. **ุฌุฏูู ุงููุถุงูุง** ูุนุฑุถ:
   - ุฑูู ุงููุถูุฉ
   - ุงูุนููุงู
   - ุงูููุน (Badge ูููู)
   - ุงูุญุงูุฉ (Badge ูููู)
   - ุงูุฃููููุฉ (Badge ูููู)
   - ุงูุนููู
   - ุงูุชูุงููู
   - ุชุงุฑูุฎ ุงูุฅูุดุงุก

### ุงูุฃููุงู ูุงูุดุงุฑุงุช

**ุญุงูุฉ ุงููุถูุฉ**:
- ูุดุทุฉ โ ุฃุฒุฑู
- ูุบููุฉ โ ุฑูุงุฏู
- ูุนููุฉ โ ุฃุญูุฑ
- ููุฏ ุงูุงูุชุธุงุฑ โ ุฑูุงุฏู ูุงุชุญ

**ุงูุฃููููุฉ**:
- ุนุงุฌู / ุนุงูู โ ุฃุญูุฑ
- ูุชูุณุท โ ุฃุฒุฑู
- ููุฎูุถ โ ุฑูุงุฏู

---

## ๐ ุงูุฃูุงู | Security

### Row Level Security (RLS)

ูู ูุณุชุฎุฏู ูุฑู **ููุท ูุถุงูุง ุดุฑูุชู**:
```sql
CREATE POLICY "Users can view cases from their company"
  ON legal_cases FOR SELECT
  USING (
    company_id IN (
      SELECT company_id FROM profiles WHERE user_id = auth.uid()
    )
  );
```

### ุงูุตูุงุญูุงุช ุงููุทููุจุฉ

| ุงูุฅุฌุฑุงุก | ุงูุตูุงุญูุฉ |
|---------|----------|
| ุนุฑุถ ุงููุถุงูุง | `legal.cases.view` |
| ุฅุถุงูุฉ ูุถูุฉ | `legal.cases.create` |
| ุชุญุฏูุซ ูุถูุฉ | `legal.cases.update` |
| ุญุฐู ูุถูุฉ | `legal.cases.delete` |

---

## ๐ฑ ุฃูุซูุฉ ุนูููุฉ | Practical Examples

### ูุซุงู 1: ุงูุจุญุซ ุนู ูุถุงูุง ุนููู ูุญุฏุฏ

```typescript
const { data: customerCases } = useLegalCases({
  client_id: "customer-uuid"
});

console.log(`ุงูุนููู ูุฏูู ${customerCases.length} ูุถูุฉ`);
```

### ูุซุงู 2: ุงููุถุงูุง ุงูุชู ููุง ุฌูุณุงุช ูุฐุง ุงูุฃุณุจูุน

```typescript
const { data: allCases } = useLegalCases({ case_status: 'active' });

const upcomingCases = allCases.filter(c => {
  const hearing = new Date(c.hearing_date);
  const weekFromNow = new Date();
  weekFromNow.setDate(weekFromNow.getDate() + 7);
  return hearing <= weekFromNow;
});

console.log(`${upcomingCases.length} ูุถูุฉ ููุง ุฌูุณุงุช ุฎูุงู ุฃุณุจูุน`);
```

### ูุซุงู 3: ุชูุฑูุฑ ุงูุชูุงููู ุงูุดูุฑูุฉ

```typescript
const { data: stats } = useLegalCaseStats();

const monthlyCosts = {
  legalFees: stats.totalValue * 0.65,      // 65% ุฃุชุนุงุจ ูุญุงูุงุฉ
  courtFees: stats.totalValue * 0.30,      // 30% ุฑุณูู ูุญููุฉ
  otherExpenses: stats.totalValue * 0.05   // 5% ูุตุงุฑูู ุฃุฎุฑู
};
```

---

## ๐ ูุตุงุฆุญ ูููุฉ | Important Tips

### โ ุงูุนู:

1. **ุณุฌู ุงููุถูุฉ ููุฑ ุชูุฏูููุง** ูููุญููุฉ
2. **ุญุฏุซ ููุนุฏ ุงูุฌูุณุฉ ุงููุงุฏูุฉ** ุฏุงุฆูุงู
3. **ุณุฌู ูุชูุฌุฉ ูู ุฌูุณุฉ** ูู `court_sessions`
4. **ุงุณุชุฎุฏู tags** ููุชุตููู ุงูุณุฑูุน
5. **ุญุฏุซ billing_status** ูุชุชุจุน ุงูููุงุชูุฑ

### โ ูุง ุชูุนู:

1. ูุง ุชุชุฑู `hearing_date` ูุงุฑุบ ุฅุฐุง ูุงู ููุงู ุฌูุณุฉ ูุญุฏุฏุฉ
2. ูุง ุชูุณู ุชุณุฌูู ุงูุชูุงููู
3. ูุง ุชููู ุฑุจุท ุงููุถูุฉ ุจุงูุนููู ุฅุฐุง ูุงู ููุฌูุฏ ูู ุงููุธุงู
4. ูุง ุชูุณู ุชุญุฏูุซ `case_status` ุนูุฏ ุฅุบูุงู ุงููุถูุฉ

---

## ๐ ุงููููุงุช ุงููุตุฏุฑูุฉ | Source Files

| ุงูููู | ุงููุธููุฉ |
|------|---------|
| `/hooks/useLegalCases.ts` | Hooks ููุจูุงูุงุช ูุงูุนูููุงุช |
| `/pages/legal/LegalCasesTracking.tsx` | ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฑุฆูุณูุฉ |
| `/supabase/migrations/...legal_system_tables.sql` | ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช |

---

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ | FAQ

**ุณ: ููู ูุชู ุชูููุฏ ุฑูู ุงููุถูุฉุ**  
ุฌ: ุชููุงุฆูุงู ุนุจุฑ ุฏุงูุฉ `generate_legal_case_number()` ุจุตูุบุฉ `LC-2025-XXX`

**ุณ: ูู ูููู ุฑุจุท ูุถูุฉ ูุงุญุฏุฉ ุจุนุฏุฉ ุนููุงุกุ**  
ุฌ: ูุงุ ูุถูุฉ ูุงุญุฏุฉ ูุนููู ูุงุญุฏ. ููู ูููู ุฅูุดุงุก ุนุฏุฉ ูุถุงูุง ูููุณ ุงูุนููู.

**ุณ: ููู ูุชู ุญุณุงุจ ุฅุฌูุงูู ุงูุชูุงูููุ**  
ุฌ: ุชููุงุฆูุงู: `legal_fees + court_fees + other_expenses`

**ุณ: ูุงุฐุง ูุญุฏุซ ุนูุฏ ุฅุบูุงู ูุถูุฉุ**  
ุฌ: ูุชู ุชุญุฏูุซ `case_status` ุฅูู `closed` ููููู ุฅุถุงูุฉ ููุงุญุธุงุช ููุงุฆูุฉ.

---

*ุขุฎุฑ ุชุญุฏูุซ: 2025-10-25*