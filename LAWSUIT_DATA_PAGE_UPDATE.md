# ุชุญุฏูุซ ุตูุญุฉ ุจูุงูุงุช ุงูุชูุงุถู - ุฅุถุงูุฉ ุฃุนูุฏุฉ ุงูุชูุงุฑูุฑ

**ุงูุชุงุฑูุฎ:** 31 ููุงูุฑ 2026  
**ุงูุตูุญุฉ:** `http://localhost:8080/legal/lawsuit-data`  
**ุงูููู:** `src/pages/legal/LawsuitDataPage.tsx`

---

## ๐ ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ ุงููุถุงูุฉ

ุชู ุฅุถุงูุฉ **9 ุฃุนูุฏุฉ ุฌุฏูุฏุฉ** ูู ุงูุชูุงุฑูุฑ ุงูุซูุงุซุฉ ุฅูู ุฌุฏูู ุจูุงูุงุช ุงูุชูุงุถู:

### 1๏ธโฃ ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ (4 ุฃุนูุฏุฉ)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `months_unpaid` | ุนุฏุฏ | ุนุฏุฏ ุงูุฃุดูุฑ ุงููุชุฃุฎุฑุฉ |
| `overdue_amount` | ูุจูุบ | ูููุฉ ุงูุฅูุฌุงุฑ ุงููุชุฃุฎุฑ (ุฑ.ู) |
| `late_penalty` | ูุจูุบ | ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ (ุฑ.ู) |
| `days_overdue` | ุนุฏุฏ | ุนุฏุฏ ุงูุฃูุงู ุงููุชุฃุฎุฑุฉ |

### 2๏ธโฃ ูู ูุดู ุงููุทุงูุจุงุช ุงููุงููุฉ (3 ุฃุนูุฏุฉ)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `invoices_count` | ุนุฏุฏ | ุนุฏุฏ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ |
| `total_invoices_amount` | ูุจูุบ | ุฅุฌูุงูู ุงููุจุงูุบ ุงููุณุชุญูุฉ (ุฑ.ู) |
| `total_penalties` | ูุจูุบ | ุฅุฌูุงูู ุงูุบุฑุงูุงุช (ุฑ.ู) |

### 3๏ธโฃ ูู ูุดู ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ (2 ุนููุฏ)
| ุงูุนููุฏ | ุงูููุน | ุงููุตู |
|--------|------|-------|
| `violations_count` | ุนุฏุฏ | ุนุฏุฏ ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ |
| `violations_amount` | ูุจูุบ | ูููุฉ ุงููุฎุงููุงุช (ุฑ.ู) |

---

## ๐จ ุงูุชุตููู ูุงูุฃููุงู

ุชู ุงุณุชุฎุฏุงู ุฃููุงู ูููุฒุฉ ููู ูุฌููุนุฉ ูู ุงูุฃุนูุฏุฉ ูุณูููุฉ ุงูุชูููุฒ:

- **ุฃุฒุฑู ูุงุชุญ** (`bg-blue-50`) - ุจูุงูุงุช ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ
- **ููุฑูุงูู ูุงุชุญ** (`bg-amber-50`) - ุจูุงูุงุช ูุดู ุงููุทุงูุจุงุช ุงููุงููุฉ
- **ุฃุญูุฑ ูุงุชุญ** (`bg-red-50`) - ุจูุงูุงุช ูุดู ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ

---

## ๐ ุงูุจุทุงูุงุช ุงูุฅุญุตุงุฆูุฉ ุงูุฌุฏูุฏุฉ

ุชู ุฅุถุงูุฉ **7 ุจุทุงูุงุช ุฅุญุตุงุฆูุฉ** ุฌุฏูุฏุฉ:

### ุงูุจุทุงูุงุช ุงูุฑุฆูุณูุฉ (4)
1. **ุฅุฌูุงูู ุงููุถุงูุง** - ุนุฏุฏ ุงููุถุงูุง ุงูููู
2. **ุฅุฌูุงูู ุงููุทุงูุจุงุช** - ูุฌููุน ููู ุงููุทุงูุจุงุช
3. **ุฅุฌูุงูู ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ** - ุนุฏุฏ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
4. **ุฅุฌูุงูู ุงููุฎุงููุงุช** - ุนุฏุฏ ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ

### ุงูุจุทุงูุงุช ุงููุฑุนูุฉ (3)
1. **ุฅุฌูุงูู ุงูุฅูุฌุงุฑ ุงููุชุฃุฎุฑ** - ูุฌููุน ุงูุฅูุฌุงุฑุงุช ุงููุชุฃุฎุฑุฉ
2. **ุฅุฌูุงูู ุงูุบุฑุงูุงุช** - ูุฌููุน ูู ุงูุบุฑุงูุงุช
3. **ุฅุฌูุงูู ูููุฉ ุงููุฎุงููุงุช** - ูุฌููุน ููู ุงููุฎุงููุงุช

---

## ๐ค ุชุตุฏูุฑ Excel

ุชู ุชุญุฏูุซ ูุธููุฉ ุงูุชุตุฏูุฑ ูุชุดูู ุฌููุน ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ:

```typescript
const exportData = filteredLawsuits.map((lawsuit, index) => ({
  '#': index + 1,
  'ุนููุงู ุงูุฏุนูู': lawsuit.case_title,
  // ... ุงูุฃุนูุฏุฉ ุงูุฃุณุงุณูุฉ
  
  // ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ
  'ุนุฏุฏ ุงูุฃุดูุฑ ุงููุชุฃุฎุฑุฉ': lawsuit.months_unpaid || 0,
  'ูููุฉ ุงูุฅูุฌุงุฑ ุงููุชุฃุฎุฑ': lawsuit.overdue_amount || 0,
  'ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ': lawsuit.late_penalty || 0,
  'ุนุฏุฏ ุงูุฃูุงู ุงููุชุฃุฎุฑุฉ': lawsuit.days_overdue || 0,
  
  // ูู ูุดู ุงููุทุงูุจุงุช ุงููุงููุฉ
  'ุนุฏุฏ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ': lawsuit.invoices_count || 0,
  'ุฅุฌูุงูู ุงููุจุงูุบ ุงููุณุชุญูุฉ': lawsuit.total_invoices_amount || 0,
  'ุฅุฌูุงูู ุงูุบุฑุงูุงุช': lawsuit.total_penalties || 0,
  
  // ูู ูุดู ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ
  'ุนุฏุฏ ุงููุฎุงููุงุช': lawsuit.violations_count || 0,
  'ูููุฉ ุงููุฎุงููุงุช': lawsuit.violations_amount || 0,
  
  // ... ุจุงูู ุงูุฃุนูุฏุฉ
}));
```

---

## ๐๏ธ ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ ูู ุฌุฏูู `lawsuit_templates`

ูุฌุจ ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ุงูุชุงููุฉ ุฅูู ุฌุฏูู `lawsuit_templates`:

```sql
-- ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ
ALTER TABLE lawsuit_templates 
ADD COLUMN months_unpaid INTEGER DEFAULT 0,
ADD COLUMN overdue_amount DECIMAL(10,2) DEFAULT 0,
ADD COLUMN late_penalty DECIMAL(10,2) DEFAULT 0,
ADD COLUMN days_overdue INTEGER DEFAULT 0;

-- ูู ูุดู ุงููุทุงูุจุงุช ุงููุงููุฉ
ALTER TABLE lawsuit_templates 
ADD COLUMN invoices_count INTEGER DEFAULT 0,
ADD COLUMN total_invoices_amount DECIMAL(10,2) DEFAULT 0,
ADD COLUMN total_penalties DECIMAL(10,2) DEFAULT 0;

-- ูู ูุดู ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ
ALTER TABLE lawsuit_templates 
ADD COLUMN violations_count INTEGER DEFAULT 0,
ADD COLUMN violations_amount DECIMAL(10,2) DEFAULT 0;

-- ุฅุถุงูุฉ ุชุนูููุงุช ููุฃุนูุฏุฉ
COMMENT ON COLUMN lawsuit_templates.months_unpaid IS 'ุนุฏุฏ ุงูุฃุดูุฑ ุงููุชุฃุฎุฑุฉ ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ';
COMMENT ON COLUMN lawsuit_templates.overdue_amount IS 'ูููุฉ ุงูุฅูุฌุงุฑ ุงููุชุฃุฎุฑ ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ';
COMMENT ON COLUMN lawsuit_templates.late_penalty IS 'ุบุฑุงูุงุช ุงูุชุฃุฎูุฑ ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ';
COMMENT ON COLUMN lawsuit_templates.days_overdue IS 'ุนุฏุฏ ุงูุฃูุงู ุงููุชุฃุฎุฑุฉ ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ';
COMMENT ON COLUMN lawsuit_templates.invoices_count IS 'ุนุฏุฏ ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ ูู ูุดู ุงููุทุงูุจุงุช';
COMMENT ON COLUMN lawsuit_templates.total_invoices_amount IS 'ุฅุฌูุงูู ุงููุจุงูุบ ุงููุณุชุญูุฉ ูู ูุดู ุงููุทุงูุจุงุช';
COMMENT ON COLUMN lawsuit_templates.total_penalties IS 'ุฅุฌูุงูู ุงูุบุฑุงูุงุช ูู ูุดู ุงููุทุงูุจุงุช';
COMMENT ON COLUMN lawsuit_templates.violations_count IS 'ุนุฏุฏ ุงููุฎุงููุงุช ูู ูุดู ุงููุฎุงููุงุช';
COMMENT ON COLUMN lawsuit_templates.violations_amount IS 'ูููุฉ ุงููุฎุงููุงุช ูู ูุดู ุงููุฎุงููุงุช';
```

---

## ๐ ุฑุจุท ุงูุจูุงูุงุช ูุน ุตูุญุฉ ุงูุชุญุถูุฑ

ูููุก ูุฐู ุงูุฃุนูุฏุฉ ุชููุงุฆูุงูุ ูุฌุจ ุชุญุฏูุซ ุตูุญุฉ ุชุญุถูุฑ ุงููุถูุฉ:

### ูู `LawsuitPreparation/index.tsx`

ุนูุฏ ุญูุธ ุงููุถูุฉุ ูุชู ุญุณุงุจ ูุญูุธ ุงูุจูุงูุงุช:

```typescript
const saveLawsuitData = async () => {
  const { data, error } = await supabase
    .from('lawsuit_templates')
    .insert({
      // ... ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
      
      // ูู ุงููุฐูุฑุฉ ุงูุดุงุฑุญุฉ
      months_unpaid: state.overdueInvoices.length,
      overdue_amount: state.calculations.overdueRent,
      late_penalty: state.calculations.lateFees,
      days_overdue: Math.floor(
        (new Date().getTime() - new Date(state.contract.start_date).getTime()) 
        / (1000 * 60 * 60 * 24)
      ),
      
      // ูู ูุดู ุงููุทุงูุจุงุช ุงููุงููุฉ
      invoices_count: state.overdueInvoices.length,
      total_invoices_amount: state.overdueInvoices.reduce(
        (sum, inv) => sum + (inv.total_amount - inv.paid_amount), 0
      ),
      total_penalties: state.overdueInvoices.reduce(
        (sum, inv) => sum + calculatePenalty(inv), 0
      ),
      
      // ูู ูุดู ุงููุฎุงููุงุช ุงููุฑูุฑูุฉ
      violations_count: state.trafficViolations.length,
      violations_amount: state.calculations.violationsFines,
    });
};
```

---

## ๐ฑ ุงูุชูุงูู ูุน ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ

ุงูุฌุฏูู ุงูุขู ูุญุชูู ุนูู **18 ุนููุฏ** ุจุฏูุงู ูู 9ุ ูุฐูู:

- โ ุชู ุฅุถุงูุฉ `overflow-x-auto` ููุชูุฑูุฑ ุงูุฃููู
- โ ุชู ุชุญุฏูุฏ ุนุฑุถ ููุงุณุจ ููู ุนููุฏ ูู Excel
- โ ุงูุฃููุงู ุชุณุงุนุฏ ูู ุงูุชูููุฒ ุจูู ุงููุฌููุนุงุช

---

## ๐ฏ ุงูููุงุฆุฏ

### 1. **ุฑุคูุฉ ุดุงููุฉ**
- ุนุฑุถ ุฌููุน ุจูุงูุงุช ุงูุชูุงุฑูุฑ ูู ููุงู ูุงุญุฏ
- ุณูููุฉ ุงูููุงุฑูุฉ ุจูู ุงููุถุงูุง

### 2. **ุชุญููู ุฃูุถู**
- ุฅุญุตุงุฆูุงุช ุฏูููุฉ ุนู ุงูููุงุชูุฑ ูุงููุฎุงููุงุช
- ูุนุฑูุฉ ุฅุฌูุงูู ุงููุจุงูุบ ุงููุณุชุญูุฉ

### 3. **ุชุตุฏูุฑ ูุงูู**
- ููู Excel ูุญุชูู ุนูู ูู ุงูุชูุงุตูู
- ุฌุงูุฒ ูููุฑุงุฌุนุฉ ูุงูุชุญููู

### 4. **ุชุตููู ูุงุถุญ**
- ุฃููุงู ูููุฒุฉ ููู ูุฌููุนุฉ ุจูุงูุงุช
- ุณูููุฉ ุงููุฑุงุกุฉ ูุงูููู

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุนุฑุถ ุงูุฌุฏูู
```bash
# ุงูุชุญ ุงูุตูุญุฉ
http://localhost:8080/legal/lawsuit-data
```

### 2. ุงูุชุญูู ูู ุงูุฃุนูุฏุฉ
- โ ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ ุธุงูุฑุฉ
- โ ุงูุฃููุงู ุตุญูุญุฉ
- โ ุงูุจูุงูุงุช ูุนุฑูุถุฉ ุจุดูู ุตุญูุญ

### 3. ุชุตุฏูุฑ Excel
- โ ุฌููุน ุงูุฃุนูุฏุฉ ููุฌูุฏุฉ
- โ ุงูุจูุงูุงุช ูุงููุฉ
- โ ุงูุชูุณูู ุตุญูุญ

### 4. ุงูุจุทุงูุงุช ุงูุฅุญุตุงุฆูุฉ
- โ ุงูุฃุฑูุงู ุตุญูุญุฉ
- โ ุงูุญุณุงุจุงุช ุฏูููุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: ูุฌุจ ุชูููุฐ SQL ุฃุนูุงู ูุฅุถุงูุฉ ุงูุฃุนูุฏุฉ
2. **ุงูุจูุงูุงุช ุงูุญุงููุฉ**: ุงููุถุงูุง ุงูููุฌูุฏุฉ ุณุชุธูุฑ ุจููู `0` ููุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ
3. **ุงููุถุงูุง ุงูุฌุฏูุฏุฉ**: ุณุชูููุฃ ุชููุงุฆูุงู ูู ุตูุญุฉ ุงูุชุญุถูุฑ
4. **ุงูุชุญุฏูุซ**: ูููู ุชุญุฏูุซ ุงููุถุงูุง ุงููุฏููุฉ ูุฏููุงู ุฃู ุนุจุฑ script

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. โ ุชูููุฐ SQL ูุฅุถุงูุฉ ุงูุฃุนูุฏุฉ
2. โณ ุชุญุฏูุซ ุตูุญุฉ ุชุญุถูุฑ ุงููุถูุฉ ูุญูุธ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ
3. โณ ุฅูุดุงุก script ูุชุญุฏูุซ ุงููุถุงูุง ุงููุฏููุฉ
4. โณ ุฅุถุงูุฉ ููุงุชุฑ ููุจุญุซ ุญุณุจ ุงูุฃุนูุฏุฉ ุงูุฌุฏูุฏุฉ

---

## โ ุงูุฎูุงุตุฉ

ุชู ุชุญุฏูุซ ุตูุญุฉ ุจูุงูุงุช ุงูุชูุงุถู ุจูุฌุงุญ ูุชุดูู:
- โ 9 ุฃุนูุฏุฉ ุฌุฏูุฏุฉ ูู ุงูุชูุงุฑูุฑ ุงูุซูุงุซุฉ
- โ 7 ุจุทุงูุงุช ุฅุญุตุงุฆูุฉ ุฌุฏูุฏุฉ
- โ ุชุตุฏูุฑ Excel ูุญุฏุซ
- โ ุชุตููู ูููู ูููุธู
- โ ุชูุงูู ูุน ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ

ุงูุตูุญุฉ ุงูุขู ุชููุฑ ุฑุคูุฉ ุดุงููุฉ ููุงููุฉ ูุฌููุน ุจูุงูุงุช ุงููุถุงูุง! ๐
