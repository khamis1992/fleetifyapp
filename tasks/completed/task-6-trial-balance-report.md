# โ ุงููููุฉ #6: ุฅูุดุงุก ุชูุฑูุฑ ููุฒุงู ุงููุฑุงุฌุนุฉ ูุน ุชุตุฏูุฑ PDF/Excel

## ๐ ููุฎุต ุงููููุฉ
**ุงูุญุงูุฉ:** ููุชููุฉ โ  
**ุชุงุฑูุฎ ุงูุจุฏุก:** 2025-01-26  
**ุชุงุฑูุฎ ุงูุงูุชูุงุก:** 2025-01-26  
**ุงูุฃููููุฉ:** ุนุงููุฉ ๐

## ๐ฏ ุงููุฏู
ุฅูุดุงุก ุชูุฑูุฑ ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance) ุงุญุชุฑุงูู ูุน ููุฒุงุช ุชุตุฏูุฑ ูุชุนุฏุฏุฉ (PDF, Excel, CSV) ูุชุณููู ูุฑุงุฌุนุฉ ุงูุญุณุงุจุงุช ุงููุญุงุณุจูุฉ ูุถูุงู ุชูุงุฒู ุงูุฏูุงุชุฑ.

## ๐ ุชูุงุตูู ุงููุดููุฉ
- ูุงู ููุงู `useTrialBalance` hook ููุฌูุฏ ูุณุจูุงู ูุฌูุจ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูู ููู ููุงู ูุงุฌูุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ ูุนุฑุถ ููุฒุงู ุงููุฑุงุฌุนุฉ
- ูู ุชูู ููุงู ุฅููุงููุฉ ุชุตุฏูุฑ ุงูุชูุงุฑูุฑ ุจุตูุบ PDF ุฃู Excel ุงุญุชุฑุงููุฉ
- ูุงู ูู ุงูุตุนุจ ุนูู ุงููุญุงุณุจ ุงูุชุญูู ูู ุชูุงุฒู ุงูุฏูุงุชุฑ ูุชุตุฏูุฑ ุงูุจูุงูุงุช ูููุฑุงุฌุนุฉ ุงูุฎุงุฑุฌูุฉ

## โจ ุงูุญู ุงูููููุฐ

### 1. ูููู ุฌุฏูุฏ: `TrialBalanceReport.tsx`
ุฃูุดุฃูุง ููููุงู ุงุญุชุฑุงููุงู ูุงููุงู ูุญุชูู ุนูู:

#### ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:
- โ **ุนุฑุถ ุจูุงูู ุงุญุชุฑุงูู** ููุญุณุงุจุงุช ูุน ุชูุณูู ูุฑูู
- โ **ุชุตููุฉ ุจุงูุชุงุฑูุฎ** ูุน ูุงุฌูุฉ Date Picker
- โ **ุญุณุงุจ ุชููุงุฆู** ููุฅุฌูุงููุงุช (ุงููุฏูู ูุงูุฏุงุฆู)
- โ **ุงูุชุญูู ูู ุงูุชูุงุฒู** ูุน ูุคุดุฑ ุจุตุฑู (ูุชูุงุฒู/ุบูุฑ ูุชูุงุฒู)
- โ **ุชูููุฒ ุงูุญุณุงุจุงุช ุงูุฑุฆูุณูุฉ** ุจุฎูููุฉ ูุฎุชููุฉ
- โ **ุนุฑุถ ุชูุงุนูู** ูุน hover effects
- โ **ุชูุณูู ุงูุนููุฉ** ุชููุงุฆูุงู ุญุณุจ ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ

#### ููุฒุงุช ุงูุชุตุฏูุฑ:
1. **ุชุตุฏูุฑ PDF** (`jspdf` + `jspdf-autotable`):
   - ุนููุงู ุซูุงุฆู ุงููุบุฉ (ุนุฑุจู/ุฅูุฌููุฒู)
   - ุฌุฏูู ุงุญุชุฑุงูู ุจุชูุณูู ูุฎุทุท
   - ุชูููุฒ ุตู ุงูุฅุฌูุงูู ุจููู ูุฎุชูู
   - ุญุงูุฉ ุงูุชูุงุฒู ูุน ุฑุณุงูุฉ ูุงุถุญุฉ
   - Footer ูุน ุงุณู ุงููุธุงู

2. **ุชุตุฏูุฑ Excel** (`xlsx`):
   - ููู Excel ูุงูู ูุน worksheet
   - ุฃุนูุฏุฉ ูุฎุตุตุฉ ุจุนุฑุถ ููุงุณุจ
   - ุตู ุงูุฅุฌูุงูู ูุฏูุฌ
   - Sheet ูููุตู ูููุนูููุงุช ุงูุฃุณุงุณูุฉ (metadata)

3. **ุชุตุฏูุฑ CSV**:
   - ููู CSV ุจุชุฑููุฒ UTF-8 ูุน BOM
   - ุนูุงููู ุซูุงุฆูุฉ ุงููุบุฉ
   - ูุนูููุงุช ุงูุชุงุฑูุฎ ูุงูุญุงูุฉ

### 2. ุงูุชูุงูู ูุน ุตูุญุฉ ุงูุชูุงุฑูุฑ
- โ ุฅุถุงูุฉ tab ุฌุฏูุฏ "ููุฒุงู ุงููุฑุงุฌุนุฉ" ูู ุตูุญุฉ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
- โ ุฌุนูู ุงูุชุงุจ ุงูุฃูู (ุฃูู ุชูุฑูุฑ ูููุญุงุณุจ)
- โ ุชูุงูู ุณูุณ ูุน ูุธุงู ุงูุชููู ุงูููุฌูุฏ

### 3. ูุงุฌูุฉ ุงููุณุชุฎุฏู
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance)                        โ
โ  ูุงุฆูุฉ ุจุฌููุน ุงูุญุณุงุจุงุช ูุฃุฑุตุฏุชูุง ุงููุฏููุฉ ูุงูุฏุงุฆูุฉ          โ
โ                                                             โ
โ  [PDF] [Excel] [CSV]                    ููุง ูู: [ุชุงุฑูุฎ]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  ุฑูุฒ ุงูุญุณุงุจ โ ุงุณู ุงูุญุณุงุจ โ ุงููุณุชูู โ ุงููุฏูู โ ุงูุฏุงุฆู    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  1          โ ุงูุฃุตูู     โ 1       โ         โ            โ
โ  11         โ ุฃุตูู ูุชุฏ..  โ 2       โ 5,000   โ            โ
โ  ...        โ ...        โ ...     โ ...     โ ...        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ              ุงูุฅุฌูุงูู (Total)          โ 50,000  โ 50,000  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ ุงูููุฒุงู ูุชูุงุฒู
  ุฅุฌูุงูู ุงููุฏูู (50,000 QAR) = ุฅุฌูุงูู ุงูุฏุงุฆู (50,000 QAR)
```

## ๐ ุงููููุงุช ุงูููุนุฏููุฉ

### 1. ูููุงุช ุฌุฏูุฏุฉ:
- โ `src/components/finance/TrialBalanceReport.tsx` (ุฌุฏูุฏ)
  - ุงููููู ุงูุฑุฆูุณู ูุชูุฑูุฑ ููุฒุงู ุงููุฑุงุฌุนุฉ
  - 350+ ุณุทุฑ ูู ุงูููุฏ ุงูููุธู
  - ูุญุชูู ุนูู 3 ุฏูุงู ุชุตุฏูุฑ (PDF, Excel, CSV)

### 2. ูููุงุช ููุนุฏููุฉ:
- โ `src/pages/finance/Reports.tsx`
  - ุฅุถุงูุฉ ุงุณุชูุฑุงุฏ ุงููููู ุงูุฌุฏูุฏ
  - ุฅุถุงูุฉ tab ุฌุฏูุฏ ูู ูุงุฆูุฉ ุงูุชููู
  - ุฅุถุงูุฉ TabsContent ููุชูุฑูุฑ ุงูุฌุฏูุฏ

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ

### ุงูููุชุจุงุช ุงููุณุชุฎุฏูุฉ:
```json
{
  "jspdf": "^3.0.3",
  "jspdf-autotable": "^5.0.2",
  "xlsx": "^0.18.5"
}
```

### ุงูู Hooks ุงููุณุชุฎุฏูุฉ:
- `useTrialBalance(asOfDate)` - ุฌูุจ ุจูุงูุงุช ููุฒุงู ุงููุฑุงุฌุนุฉ ูู RPC function
- `useCurrencyFormatter()` - ุชูุณูู ุงูุนููุฉ ุญุณุจ ุฅุนุฏุงุฏุงุช ุงูุดุฑูุฉ
- `useState()` - ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุชุงุฑูุฎ

### RPC Function:
```sql
get_trial_balance(company_id_param, as_of_date)
```

### ุงูุจูุงูุงุช ุงูููุนุงุฏุฉ:
```typescript
interface TrialBalanceItem {
  account_code: string;
  account_name: string;
  account_level?: number;
  debit_balance: number;
  credit_balance: number;
}
```

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงูุญุงูุงุช ุงููุฎุชุจุฑุฉ:
1. โ ุนุฑุถ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ
2. โ ุชุตููุฉ ุงูุจูุงูุงุช ุจุงูุชุงุฑูุฎ
3. โ ุญุณุงุจ ุงูุฅุฌูุงููุงุช ุจุดูู ุตุญูุญ
4. โ ุงูุชุญูู ูู ุงูุชูุงุฒู
5. โ ุชุตุฏูุฑ PDF ุจูุฌุงุญ
6. โ ุชุตุฏูุฑ Excel ุจูุฌุงุญ
7. โ ุชุตุฏูุฑ CSV ุจูุฌุงุญ
8. โ ุนุฑุถ ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ุจูุงูุงุช" ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ูููุฏ
9. โ ุงูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุจุดูู ุตุญูุญ
10. โ Responsive design ุนูู ุงูุดุงุดุงุช ุงููุฎุชููุฉ

### ุฃูุซูุฉ ุงุฎุชุจุงุฑ:
```bash
# ูุชุญ ุตูุญุฉ ุงูุชูุงุฑูุฑ ุงููุงููุฉ
https://www.alaraf.online/finance/reports

# ุงุฎุชูุงุฑ tab "ููุฒุงู ุงููุฑุงุฌุนุฉ"
# ุชุบููุฑ ุงูุชุงุฑูุฎ
# ุงุฎุชุจุงุฑ ุฃุฒุฑุงุฑ ุงูุชุตุฏูุฑ
```

## ๐ ุงููุชุงุฆุฌ

### ูุจู:
- โ ูุง ุชูุฌุฏ ูุงุฌูุฉ ูุนุฑุถ ููุฒุงู ุงููุฑุงุฌุนุฉ
- โ ูุง ุชูุฌุฏ ุฅููุงููุฉ ุชุตุฏูุฑ ุงุญุชุฑุงููุฉ
- โ ุตุนูุจุฉ ูู ุงูุชุญูู ูู ุชูุงุฒู ุงูุฏูุงุชุฑ

### ุจุนุฏ:
- โ ูุงุฌูุฉ ุงุญุชุฑุงููุฉ ูุงููุฉ ูููุฒุงู ุงููุฑุงุฌุนุฉ
- โ 3 ุตูุบ ุชุตุฏูุฑ ุงุญุชุฑุงููุฉ (PDF, Excel, CSV)
- โ ุชุญูู ุชููุงุฆู ูู ุงูุชูุงุฒู ูุน ูุคุดุฑ ุจุตุฑู
- โ ุชูุณูู ูุฑูู ููุญุณุงุจุงุช ุงูุฑุฆูุณูุฉ ูุงููุฑุนูุฉ
- โ ุชุตููุฉ ุณููุฉ ุจุงูุชุงุฑูุฎ
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ

## ๐ ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ

1. **ุงุณุชุฎุฏุงู ุงูููุชุจุงุช ุงูููุงุณุจุฉ:** ุงุฎุชูุงุฑ `jspdf` ู`xlsx` ูุงู ููุงุณุจุงู ููุชุตุฏูุฑ ุงูุงุญุชุฑุงูู
2. **ุงูุชุญูู ูู ุงูููุชุจุงุช ุงูููุฌูุฏุฉ:** ูุจู ุฅุถุงูุฉ ููุชุจุงุช ุฌุฏูุฏุฉุ ุชุญูููุง ูู package.json
3. **ุงูุชุตููู ุงููุฑูู:** ุงุณุชุฎุฏุงู `account_level` ูุชูููุฒ ุงูุญุณุงุจุงุช ุงูุฑุฆูุณูุฉ ูุงู ูุนุงูุงู
4. **ุงูุชุญูู ูู ุงูุชูุงุฒู:** ุฅุถุงูุฉ ูุคุดุฑ ุจุตุฑู ูุญุณู ุชุฌุฑุจุฉ ุงููุญุงุณุจ ุจุดูู ูุจูุฑ

## ๐ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

1. ุฅุถุงูุฉ ููุงุฑูุฉ ุจูู ูุชุฑุชูู (Comparative Trial Balance)
2. ุฅุถุงูุฉ ุชุตููุฉ ุจููุน ุงูุญุณุงุจ (ุฃุตููุ ุฎุตููุ ุฅูุฑุงุฏุงุชุ ูุตุฑููุงุช)
3. ุฅุถุงูุฉ ููุฒุฉ ุทุจุงุนุฉ ูุจุงุดุฑุฉ
4. ุฅุถุงูุฉ ุญูุธ ุงูุชูุฑูุฑ ูู ุงูุณุญุงุจุฉ
5. ุฅุถุงูุฉ ุฌุฏููุฉ ุชููุงุฆูุฉ ูุฅูุดุงุก ุงูุชูุงุฑูุฑ
6. ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุนูุฏ ุนุฏู ุงูุชูุงุฒู
7. ุชุญุณูู ุชุตุฏูุฑ PDF ููุฏุนู ุงูุฎุทูุท ุงูุนุฑุจูุฉ ุจุดูู ุฃูุถู

## ๐ ุงูุฑูุงุจุท ุฐุงุช ุงูุตูุฉ

- [useGeneralLedger.ts](../../src/hooks/useGeneralLedger.ts) - Hook ูุฌูุจ ุจูุงูุงุช ููุฒุงู ุงููุฑุงุฌุนุฉ
- [RPC Function: get_trial_balance](../../supabase/migrations/) - ุงูุฏุงูุฉ ุงููุฎุฒูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [Chart of Accounts](../../src/pages/finance/ChartOfAccounts.tsx) - ุฏููู ุงูุญุณุงุจุงุช

## โ ุงูุฎูุงุตุฉ

ุชู ุฅูุดุงุก ุชูุฑูุฑ ููุฒุงู ุงููุฑุงุฌุนุฉ ุจูุฌุงุญ ูุน ุฌููุน ุงูููุฒุงุช ุงููุทููุจุฉ:
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุงุญุชุฑุงููุฉ
- โ ุชุตุฏูุฑ PDF ุงุญุชุฑุงูู
- โ ุชุตุฏูุฑ Excel ูุงูู
- โ ุชุตุฏูุฑ CSV ุจุณูุท
- โ ุงูุชุญูู ุงูุชููุงุฆู ูู ุงูุชูุงุฒู
- โ ุชุตููุฉ ุจุงูุชุงุฑูุฎ
- โ ุชูุณูู ูุฑูู ููุญุณุงุจุงุช

ุงููููุฉ ููุชููุฉ ุจูุณุจุฉ **100%** โ

---
**๐ ุชุงุฑูุฎ ุงูุฅูุดุงุก:** 2025-01-26  
**๐ค ุงููุทูุฑ:** Claude (Cursor AI)  
**๐ ุงูุญุงูุฉ ุงูููุงุฆูุฉ:** ููุชูู โ

