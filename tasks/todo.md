# ูุดููุฉ ุนุฑุถ ุญุงูุฉ ุงูููุงุชูุฑ ูู ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑู

## ุงููุดููุฉ ุงูุฃุตููุฉ
ุงูุนููู **ุฑุงูู** ูุธูุฑ ูู ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑู ุจุฃู ูุฏูู ููุงุชูุฑ "ุบูุฑ ูุฏููุน"ุ ููู ุนูุฏ ุงูุฏุฎูู ุฅูู ุตูุญุฉ ุงูุฏูุน ุงูุณุฑูุน ูุง ุชุธูุฑ ุฃู ููุงุชูุฑ.

## ุงููุดููุฉ ุงูุญููููุฉ โ
ุงูููุงุชูุฑ **ูุฏููุนุฉ** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููู ุชุธูุฑ **"ุบูุฑ ูุฏููุน"** ูู ุงููุงุฌูุฉ!

## ุงูุชุญููู

### ุจูุงูุงุช ุงูุนููู
- **ID**: `831a1b5b-af2e-4f16-bd18-4a72e95fe950`
- **ุงูุงุณู**: ุฑุงูู
- **ุงููุงุชู**: 33336834
- **ุนุฏุฏ ุงูุนููุฏ**: 3 ุนููุฏ ูุดุทุฉ
  - LTO2024104 (ูุนูู ูุฃุณุงูุฉ)
  - LTO2024105 (ูุนูู ูุทุงุฑู ุงูุจูุฒูุฏู)
  - LTO2024106 (ูุนูู ูุทุงุฑู ุงูุจูุฒูุฏู)

### ุชุญููู ุงูููุงุชูุฑ
โ **ูู ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑู**: ุชุธูุฑ 31 ูุงุชูุฑุฉ ููุนูุฏ LTO2024104
โ **ูู ุตูุญุฉ ุงูุฏูุน ุงูุณุฑูุน**: ูุง ุชุธูุฑ ุฃู ููุงุชูุฑ

### ุงูุณุจุจ ุงูุฌุฐุฑู โ

ุงููุดููุฉ ูู `useMonthlyCollections.ts` ุงูุณุทุฑ **107**:

```typescript
if (inv.status === 'paid') status = 'paid';  // โ ุฎุทุฃ!
```

**ุงูุฎุทุฃ**: ุงูููุฏ ููุญุต `inv.status` (ุญุงูุฉ ุงููุงุชูุฑุฉ) ุจุฏูุงู ูู `inv.payment_status` (ุญุงูุฉ ุงูุฏูุน)!

**ุงูุจูุงูุงุช ุงููุนููุฉ**:
- `payment_status = 'paid'` โ (ูุฏููุนุฉ)
- `status = 'overdue'` (ูุงูุช ูุชุฃุฎุฑุฉ ููู ุชู ุฏูุนูุง)

**ุงููุชูุฌุฉ**: ุงูููุฏ ูุนุชุจุฑูุง ุบูุฑ ูุฏููุนุฉ ููุนุฑุถ "ุบูุฑ ูุฏููุน" ูู ุงููุงุฌูุฉ!

### ููุงุฐุง ุชุธูุฑ ูู ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑูุ

ูู `useMonthlyCollections.ts` ุงูุณุทุฑ **92**:
```typescript
.neq('status', 'cancelled')
```

ูุฌูุจ **ุฌููุน** ุงูููุงุชูุฑ (ุงููุฏููุนุฉ ูุบูุฑ ุงููุฏููุนุฉ) ุซู ูููุชุฑูุง ูุงุญูุงู ูู ุงูุณุทุฑ **130**:
```typescript
if (item.status !== 'paid') return true; // ูุนุฑุถ ุบูุฑ ุงููุฏููุนุฉ
// ููุนุฑุถ ุงููุฏููุนุฉ ููุท ุฅุฐุง ูุงูุช ูู ูุฐุง ุงูุดูุฑ
```

## ุงูุญู โ

ุชู ุฅุตูุงุญ ูุดููุชูู ูู `useMonthlyCollections.ts`:

### 1. ุฅุตูุงุญ ุชุญุฏูุฏ ุญุงูุฉ ุงูุฏูุน (ุงูุณุทุฑ 107)

**ูุจู ุงูุฅุตูุงุญ** โ:
```typescript
if (inv.status === 'paid') status = 'paid';
```

**ุจุนุฏ ุงูุฅุตูุงุญ** โ:
```typescript
if (inv.payment_status === 'paid') status = 'paid';
```

### 2. ุฅุฎูุงุก ุงูููุงุชูุฑ ุงููุฏููุนุฉ (ุงูุณุทุฑ 124-137)

**ูุจู ุงูุฅุตูุงุญ** โ:
```typescript
.filter(item => {
  if (item.status !== 'paid') return true;
  // ูุนุฑุถ ุงูููุงุชูุฑ ุงููุฏููุนุฉ ูู ูุฐุง ุงูุดูุฑ
  return dueDate >= startOfCurrentMonth && dueDate <= endOfCurrentMonth;
});
```

**ุจุนุฏ ุงูุฅุตูุงุญ** โ:
```typescript
.filter(item => {
  // ุนุฑุถ ููุท ุงูููุงุชูุฑ ุบูุฑ ุงููุฏููุนุฉ
  return item.status !== 'paid';
});
```

## ุงููุชูุฌุฉ

ุงูุขู ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑู ุชุนุฑุถ **ููุท ุงูููุงุชูุฑ ุบูุฑ ุงููุฏููุนุฉ**:
- โ ุงูููุงุชูุฑ ุบูุฑ ุงููุฏููุนุฉ ุชุธูุฑ ูุน ุฒุฑ "ุชุณุฌูู ุฏูุนุฉ"
- โ ุงูููุงุชูุฑ ุงููุฏููุนุฉ **ูุง ุชุธูุฑ** (ุชู ุฅุฎูุงุคูุง)
- โ ุงูุฅุญุตุงุฆูุงุช ุชุญุณุจ ุจุดูู ุตุญูุญ

## ุงูุชุฃุซูุฑ

ูุฐุง ุงูุฅุตูุงุญ ูุญุณูู:
1. โ ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑู ุชุฑูุฒ ุนูู ูุง ูุญุชุงุฌ ูุชุงุจุนุฉ ููุท
2. โ ุชูููู ุงูููุถู ูู ุงููุงุฌูุฉ
3. โ ุชุญุณูู ุชุฌุฑุจุฉ ุงูููุธู (ูุฑู ููุท ูุง ูุญุชุงุฌ ุนูู)

---

## ุชุญุณูู ุนุฑุถ ุญุงูุงุช ุงูุนููุฏ โ

### ุงูุชุญุณูู ุงูุฌุฏูุฏ
ุชู ุฅุถุงูุฉ ุฃููุงู ูููุฒุฉ ูุฃููููุงุช ููู ุญุงูุฉ ุนูุฏ ูู ุตูุญุฉ Employee Workspace:

| ุงูุญุงูุฉ | ุงูููู | ุงูุฃููููุฉ | ุงููุตู |
|--------|-------|----------|-------|
| **ูุดุท** | ๐ข ุฃุฎุถุฑ | โถ๏ธ | ุนูุฏ ูุดุท - ูุธูุฑ ุฌููุน ุงูุฃุฒุฑุงุฑ |
| **ููุชูู** | ๐ด ุฃุญูุฑ | โ | ุนูุฏ ููุชูู - ุจุฏูู ุฃุฒุฑุงุฑ ุนูู |
| **ููุบู** | โซ ุฑูุงุฏู | โ | ุนูุฏ ููุบู - ุจุฏูู ุฃุฒุฑุงุฑ ุนูู |
| **ููููู** | ๐ ุจุฑุชูุงูู | โธ๏ธ | ุนูุฏ ููููู ูุคูุชุงู |
| **ุชุญุช ุงูุฅุฌุฑุงุก ุงููุงูููู** | ๐ฃ ุจููุณุฌู | โ๏ธ | ุนูุฏ ูู ุฅุฌุฑุงุกุงุช ูุงููููุฉ |
| **ูุนูู** | ๐ก ุฃุตูุฑ | โฐ | ุนูุฏ ูุนูู |

### ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ:
1. โ **ุฎุท ูููู** ุนูู ูููู ูู ุจุทุงูุฉ ุนูุฏ
2. โ **Badge ูููู** ูุน ุฃููููุฉ ุชูุถุญ ุงูุญุงูุฉ
3. โ **ุฎูููุฉ ููููุฉ ุฎูููุฉ** ููุจุทุงูุฉ
4. โ **ุฅุฎูุงุก ุฃุฒุฑุงุฑ ุงูุนูู** ููุนููุฏ ุงูููุชููุฉ/ุงูููุบูุฉ
5. โ **Avatar ูููู** ุญุณุจ ุญุงูุฉ ุงูุนูุฏ
6. โ **ุฑูู ุฌูุงู ุงูุนููู** ูุงุจู ููููุฑ ููุงุชุตุงู ูุจุงุดุฑุฉ
7. โ **ุฒุฑ ุงุชุตุงู ุณุฑูุน** ๐ ูุชุงุญ ูุฌููุน ุงูุนููุฏ

---

## ุฅุถุงูุฉ ุฒุฑ ุญุฐู ุงูุนููู ููุงุฆูุงู โ

### ุงูููู: `src/components/customers/CustomerDetailsPageNew.tsx`

### ุงูุชุญุณููุงุช:

#### 1. ุฒุฑ ุญุฐู ูุงุถุญ ูู ุงูู Header
- โ ุฒุฑ ุฃุญูุฑ ุจุฌุงูุจ ุฒุฑ "ุชุนุฏูู"
- โ ูุต ูุงุถุญ: "ุญุฐู ุงูุนููู ููุงุฆูุงู"
- โ ุฃููููุฉ ุณูุฉ ุงูููููุงุช ๐๏ธ

#### 2. ุฏุงูุฉ ุญุฐู ูุญุณููุฉ ูุน ูุญูุตุงุช ุฃูุงู
```typescript
// ุงูุชุญูู ูู:
โ ุนุฏู ูุฌูุฏ ุนููุฏ ูุดุทุฉ
โ ุนุฏู ูุฌูุฏ ููุงุชูุฑ ุบูุฑ ูุฏููุนุฉ
โ ุนุฑุถ ุฑุณุงุฆู ุชุญุฐูุฑ ูุงุถุญุฉ
```

#### 3. Dialog ุชุฃููุฏ ูุญุณูู
- โ ุชุตููู ุฌุฐุงุจ ูุน ุฃููููุงุช
- โ ุนุฑุถ ุงุณู ุงูุนููู ูุฑูู ุงููููุฉ
- โ ุชุญุฐูุฑุงุช ูุงุถุญุฉ ุจุฃููุงู ูููุฒุฉ
- โ ุนุฑุถ ุชูุงุตูู ุงูุนููุฏ ูุงููุฏููููุงุช ุฅู ูุฌุฏุช
- โ ุฒุฑ ุญุฐู ุฃุญูุฑ ูุงุถุญ

### ุงูุญูุงูุฉ:
- ๐ก๏ธ ูุง ูููู ุญุฐู ุนููู ูุฏูู ุนููุฏ ูุดุทุฉ
- ๐ก๏ธ ูุง ูููู ุญุฐู ุนููู ูุฏูู ููุงุชูุฑ ุบูุฑ ูุฏููุนุฉ
- ๐ก๏ธ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุชูุถุญ ุงูุณุจุจ

---

## ุชูุญูุฏ ุนุฑุถ ุฃุณูุงุก ุงูุนููุงุก โ

### ุงููุดููุฉ
ุงูุฃุณูุงุก ูู ุตูุญุฉ Employee Workspace ูุง ุชุทุงุจู ุงูุฃุณูุงุก ูู ุตูุญุฉ ุชูุงุตูู ุงูุนููู.

### ุงูุญู
ุงุณุชุฎุฏุงู ุฏุงูุฉ `formatCustomerName()` ุงูููุญุฏุฉ ูู ุฌููุน ุงูุฃูุงูู:

#### ุงููููุงุช ุงููุญุฏูุซุฉ:
1. โ `src/hooks/useMonthlyCollections.ts` - ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑู
2. โ `src/hooks/useEmployeeContracts.tsx` - ูุงุฆูุฉ ุงูุนููุฏ ูุงูุฃููููุงุช
3. โ `src/pages/EmployeeWorkspace.tsx` - ุนุฑุถ ุงูุนููุฏ

#### ููุงุนุฏ ุงูุชุณููุฉ ุงูููุญุฏุฉ:
- **ููุดุฑูุงุช**: `company_name_ar` ุฃููุงูุ ุซู `company_name`
- **ููุฃูุฑุงุฏ**: `first_name + last_name` ุฃููุงูุ ุซู `first_name_ar + last_name_ar`
- **Fallback**: `full_name` ุฃู "ุบูุฑ ูุญุฏุฏ"

### ุงููุชูุฌุฉ:
โ ุงูุฃุณูุงุก ุงูุขู **ูุชุทุงุจูุฉ** ูู ุฌููุน ุงูุตูุญุงุช!

---

## ุฅุนุงุฏุฉ ุชุตููู ูุงุฆูุฉ ุงูุชุญุตูู ุงูุดูุฑู โ

### ุงูุชุตููู ุงูุฌุฏูุฏ: ุชุฌููุน ุญุณุจ ุงูุนููู

#### ูุจู โ:
```
- ูุงุชูุฑุฉ #001 - ุฑุงูู - 2,268 ุฑูุงู
- ูุงุชูุฑุฉ #002 - ุฑุงูู - 2,268 ุฑูุงู  
- ูุงุชูุฑุฉ #003 - ุฑุงูู - 2,268 ุฑูุงู
- ูุงุชูุฑุฉ #004 - ูุญูุฏ - 1,500 ุฑูุงู
```
**ุงููุดููุฉ**: ูุงุฆูุฉ ุทูููุฉ ููุฑุฑุฉุ ุตุนุจ ูุนุฑูุฉ ุฅุฌูุงูู ูู ุนููู

#### ุจุนุฏ โ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [R] ุฑุงูู                                โ
โ ๐ 3 ููุงุชูุฑ โข ๐ฐ 6,804 ุฑูุงู ูุณุชุญู      โ
โ [๐ฐ ุชุณุฌูู ุฏูุนุฉ] [โผ]                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ   โโ ูุงุชูุฑุฉ #001 - 2,268 ุฑูุงู - ูุชุฃุฎุฑ  โ
โ   โโ ูุงุชูุฑุฉ #002 - 2,268 ุฑูุงู - ูุชุฃุฎุฑ  โ
โ   โโ ูุงุชูุฑุฉ #003 - 2,268 ุฑูุงู - ูุณุชุญู  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [ู] ูุญูุฏ                                โ
โ ๐ 1 ูุงุชูุฑุฉ โข ๐ฐ 1,500 ุฑูุงู ูุณุชุญู      โ
โ [๐ฐ ุชุณุฌูู ุฏูุนุฉ] [โผ]                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ:

1. โ **ุชุฌููุน ุฐูู**: ุงูููุงุชูุฑ ูุฌูุนุฉ ุญุณุจ ุงูุนููู
2. โ **ุฅุฌูุงูู ูุงุถุญ**: ูุฌููุน ุงููุณุชุญูุงุช ููู ุนููู
3. โ **ูุงุจู ููุชูุณูุน**: ุงุถุบุท ูุฑุคูุฉ ุชูุงุตูู ุงูููุงุชูุฑ
4. โ **ุฒุฑ ุฏูุน ูุจุงุดุฑ**: ููู ุนููู ุนูู ุญุฏุฉ
5. โ **ุชุฑุชูุจ ุฐูู**: ุงูุนููุงุก ูุฑุชุจูู ุญุณุจ ุงููุจูุบ (ุงูุฃูุจุฑ ุฃููุงู)
6. โ **ุชุตููู ุฌููู**: ุฃููุงู ูุฃููููุงุช ูุงุถุญุฉ

### ุงูููุงุฆุฏ:

- ๐ฏ **ุชุฑููุฒ ุฃูุถู**: ุฑุคูุฉ ูุงุถุญุฉ ููู ูุญุชุงุฌ ูุชุงุจุนุฉ
- โก **ุณุฑุนุฉ ุฃูุจุฑ**: ุฏูุน ุฌููุน ููุงุชูุฑ ุงูุนููู ุจููุฑุฉ ูุงุญุฏุฉ
- ๐ **ูุนูููุงุช ุฃูุถุญ**: ุฅุฌูุงูู ุงููุณุชุญูุงุช ููู ุนููู
- ๐งน **ูุงุฌูุฉ ูุธููุฉ**: ุชูููู ุงูููุถู ุงูุจุตุฑูุฉ
- ๐ **ุงุณู ุงูุนููู ูุงุจู ููููุฑ**: ููุงูุชูุงู ูุตูุญุฉ ุชูุงุตูู ุงูุนููู
- ๐ค **Avatar ูุงุจู ููููุฑ**: ุฃูุถุงู ูููู ูุชูุงุตูู ุงูุนููู

### ุงูุชูุงุนู:

- **ุงูุงุณู**: ุงุถุบุท ุนููู โ ุตูุญุฉ ุชูุงุตูู **ุงูุนูุฏ** (ุฃูู ุนูุฏ ููุนููู)
- **Avatar**: ุงุถุบุท ุนููู โ ุตูุญุฉ ุชูุงุตูู **ุงูุนูุฏ**
- **ุงููุงุชูุฑุฉ ูู ุงููุงุฆูุฉ**: ุงุถุบุท ุนูููุง โ ุตูุญุฉ ุชูุงุตูู **ุงูุนูุฏ** ุงููุฑุชุจุท
- **ุฒุฑ ุชุณุฌูู ุฏูุนุฉ**: โ ุตูุญุฉ ุงูุฏูุน ุงูุณุฑูุน
- **ุฒุฑ โผ/โฒ**: ุชูุณูุน/ุทู ูุงุฆูุฉ ุงูููุงุชูุฑ
