# ุชุญุฏูุซ ุญุงูุฉ ุงูุนููุฏ - ุดุฑูุฉ ุงูุนุฑุงู

## ๐ ุงููููุฉ
ุชุญุฏูุซ ุญุงูุฉ ุฌููุน ุงูุนููุฏ ูู **"ููุฏ ุงููุฑุงุฌุนุฉ"** ุฅูู **"ููุบูุฉ"** ูู ุดุฑูุฉ ุงูุนุฑุงู.

- **ุงูุดุฑูุฉ**: ุงูุนุฑุงู ูุชุฃุฌูุฑ ุงูุณูุงุฑุงุช
- **Company ID**: `24bc0b21-4e2d-4413-9842-31719a3669f4`
- **ุงูุนุฏุฏ ุงููุชููุน**: 409 ุนูุฏ
- **ูู**: `under_review`
- **ุฅูู**: `cancelled`

---

## ๐ ุทุฑู ุงูุชูููุฐ

### ุงูุทุฑููุฉ 1: ุณูุฑูุจุช Node.js (ุงูููุตู ุจู) โ

```bash
# ุชูููุฐ ุงูุณูุฑูุจุช
node update_alaraf_contracts.mjs
```

**ุงููููุฒุงุช:**
- โ ูุนุฑุถ ุนุฏุฏ ุงูุนููุฏ ูุจู ุงูุชุญุฏูุซ
- โ ูุญุฏุซ ุฌููุน ุงูุนููุฏ ุฏูุนุฉ ูุงุญุฏุฉ
- โ ูุนุฑุถ ุฅุญุตุงุฆูุงุช ุจุนุฏ ุงูุชุญุฏูุซ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุงููุฉ

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ Terminal ูู ูุฌูุฏ ุงููุดุฑูุน
2. ููุฐ ุงูุฃูุฑ: `node update_alaraf_contracts.mjs`
3. ุงูุชุธุฑ ุงูุชูุงู ุงูุชุญุฏูุซ
4. ุฑุงุฌุน ุงูุฅุญุตุงุฆูุงุช ุงููุนุฑูุถุฉ

---

### ุงูุทุฑููุฉ 2: SQL ูุจุงุดุฑ (ูู Supabase Dashboard)

#### ุงูููู: `.qoder/update_contracts_simple.sql`

```sql
UPDATE contracts
SET 
    status = 'cancelled',
    updated_at = NOW()
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
  AND status = 'under_review';
```

**ุงูุฎุทูุงุช:**
1. ุงูุชุญ Supabase Dashboard
2. ุงุฐูุจ ุฅูู SQL Editor
3. ุงูุณุฎ ูุงูุตู ุงูููุฏ ูู `update_contracts_simple.sql`
4. ุงุถุบุท Run

---

### ุงูุทุฑููุฉ 3: SQL ูุชูุฏู (ูุน ุชุชุจุน)

#### ุงูููู: `.qoder/update_alaraf_contracts_to_cancelled.sql`

ูุฐุง ุงูุณูุฑูุจุช ูุชุถูู:
- โ ุงูุชุญูู ูู ูุนุฑู ุงูุดุฑูุฉ
- โ ุนุฏ ุงูุนููุฏ ูุจู ุงูุชุญุฏูุซ
- โ ุชูููุฐ ุงูุชุญุฏูุซ
- โ ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ุจุนุฏ ุงูุชุญุฏูุซ

---

## ๐ ุงูุชุญูู ูู ุงููุชุงุฆุฌ

### ุงุณุชุนูุงู ุงูุชุญูู:

```sql
-- ุนุฏ ุงูุนููุฏ ุญุณุจ ุงูุญุงูุฉ ูู ุดุฑูุฉ ุงูุนุฑุงู
SELECT 
    status,
    COUNT(*) as count
FROM contracts
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
GROUP BY status
ORDER BY count DESC;
```

### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

| ุงูุญุงูุฉ | ูุจู ุงูุชุญุฏูุซ | ุจุนุฏ ุงูุชุญุฏูุซ |
|--------|-------------|-------------|
| under_review | 409 | 0 |
| cancelled | X | X + 409 |

---

## โ๏ธ ุชุญุฐูุฑุงุช ูููุฉ

1. **ูุณุฎ ุงุญุชูุงุทู**: ุชุฃูุฏ ูู ูุฌูุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุจู ุงูุชูููุฐ
2. **ูุง ูููู ุงูุชุฑุงุฌุน**: ูุฐุง ุงูุชุญุฏูุซ ุณูุบูุฑ ุญุงูุฉ 409 ุนูุฏ ุจุดูู ุฏุงุฆู
3. **ุงูุชุฃุซูุฑ**: ุณูุคุซุฑ ุนูู:
   - ุฅุญุตุงุฆูุงุช ุงูุนููุฏ
   - ุงูุชูุงุฑูุฑ ุงููุงููุฉ
   - ููุญุฉ ุงูุชุญูู

---

## ๐ ุงูุฑุฌูุน ุนู ุงูุชุบููุฑุงุช (ุฅุฐุง ูุฒู ุงูุฃูุฑ)

ุฅุฐุง ุงุญุชุฌุช ุงูุฑุฌูุน ููุญุงูุฉ ุงูุณุงุจูุฉ:

```sql
-- ููุงุญุธุฉ: ูุฐุง ุณูุฑุฌุน ุฌููุน ุงูุนููุฏ ุงูููุบูุฉ ุฅูู ููุฏ ุงููุฑุงุฌุนุฉ
-- ุงุณุชุฎุฏู ุจุญุฐุฑ!
UPDATE contracts
SET 
    status = 'under_review',
    updated_at = NOW()
WHERE company_id = '24bc0b21-4e2d-4413-9842-31719a3669f4'
  AND status = 'cancelled'
  AND updated_at >= NOW() - INTERVAL '1 hour'; -- ููุท ุงููุญุฏุซุฉ ูู ุขุฎุฑ ุณุงุนุฉ
```

---

## ๐ ุณุฌู ุงูุชูููุฐ

- [ ] ุชู ุงูุชุญูู ูู ุงูุนุฏุฏ (409 ุนูุฏ)
- [ ] ุชู ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ
- [ ] ุชู ุชูููุฐ ุงูุณูุฑูุจุช
- [ ] ุชู ุงูุชุญูู ูู ุงููุชุงุฆุฌ
- [ ] ุชู ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู

---

## ๐๏ธ ุงููููุงุช ุงููุฑููุฉ

1. **update_alaraf_contracts.mjs** - ุณูุฑูุจุช Node.js ุงูุฑุฆูุณู
2. **.qoder/update_contracts_simple.sql** - SQL ุจุณูุท ููุชูููุฐ ุงููุจุงุดุฑ
3. **.qoder/update_alaraf_contracts_to_cancelled.sql** - SQL ูุชูุฏู ูุน ุชุชุจุน

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2025-10-26  
**ุงูุญุงูุฉ**: ุฌุงูุฒ ููุชูููุฐ โณ
