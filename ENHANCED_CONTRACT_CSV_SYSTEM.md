# ๐ ูุธุงู ุฑูุน ุงูุนููุฏ ุงููุญุณู - ุฏููู ุดุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุญุณู ูุฑูุน ูููุงุช CSV ูุฅูุดุงุก ุงูุนููุฏ ุชููุงุฆูุงู ูุน ุฅููุงููุฉ ุฅูุดุงุก ุงูุนููุงุก ุงูุฌุฏุฏ. ุงููุธุงู ูุฏุนู ุงูุขู:

- **ุฅูุดุงุก ุงูุนููุงุก ุชููุงุฆูุงู** ุนูุฏ ุนุฏู ูุฌูุฏูู
- **ุงูุจุญุซ ุงูุฐูู** ุนู ุงูุนููุงุก ุจุงูุฃุณูุงุก ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- **ุฑุจุท ุงููุฑูุจุงุช** ุชููุงุฆูุงู ูู ุฃุฑูุงู ุงูููุญุงุช
- **ุฅุญุตุงุฆูุงุช ููุตูุฉ** ุนู ุงูุนูููุงุช ุงูููุฌุฒุฉ
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุญุณูุฉ** ูุน ุชูุงุฑูุฑ ุชูุตูููุฉ

## ๐ฏ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุฅูุดุงุก ุงูุนููุงุก ุงูุชููุงุฆู
- ูุจุญุซ ุงููุธุงู ุนู ุงูุนููู ุจุงูุงุณู ุฃููุงู
- ุฅุฐุง ูู ููุฌุฏุ ููุดุฆ ุนููู ุฌุฏูุฏ ุชููุงุฆูุงู
- ูุญุฏุฏ ููุน ุงูุนููู (ูุฑุฏ/ุดุฑูุฉ) ุจุฐูุงุก
- ูุณุฌู ูุนูููุงุช ุฃุณุงุณูุฉ ููุนููู ุงูุฌุฏูุฏ

### 2. ุงูุจุญุซ ุงูุฐูู
- ุจุญุซ ุจุงูุฃุณูุงุก ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ูุทุงุจูุฉ ุฏูููุฉ ูุฌุฒุฆูุฉ
- ุชุนุงูู ูุน ุงูุฃุณูุงุก ุงููุฑูุจุฉ
- ูุงุด ููุจุญุซุงุช ูุชุญุณูู ุงูุฃุฏุงุก

### 3. ุฅุญุตุงุฆูุงุช ููุตูุฉ
- ุนุฏุฏ ุงูุนููุฏ ุงููููุดุฃุฉ
- ุนุฏุฏ ุงูุนููุงุก ุงูุฌุฏุฏ
- ุนุฏุฏ ุงูุฃุฎุทุงุก ูุงูุชุญุฐูุฑุงุช
- ุชูุงุฑูุฑ ูุงุจูุฉ ููุชุญููู

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### 1. `src/hooks/useContractCSVUpload.ts`
**ุงูุชุญุณููุงุช:**
- ุฅุถุงูุฉ ุฏุงูุฉ `findOrCreateCustomer()` ููุจุญุซ ุฃู ุงูุฅูุดุงุก ุงูุชููุงุฆู
- ุชุญุฏูุซ ูุงุฌูุฉ `CSVUploadResults` ูุชุดูู ุฅุญุตุงุฆูุงุช ุฌุฏูุฏุฉ
- ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุน ุฃุณูุงุก ุงูุนููุงุก
- ูุงูุจ ูุญุฏุซ ุจุฃูุซูุฉ ูู ุงูุจูุงูุงุช ุงููุนููุฉ

**ุงูุฏูุงู ุงูุฌุฏูุฏุฉ:**
```typescript
const findOrCreateCustomer = async (
  customerName: string, 
  targetCompanyId: string
): Promise<{ id: string; created: boolean; error?: string }>
```

### 2. `src/components/contracts/ContractCSVUpload.tsx`
**ุงูุชุญุณููุงุช:**
- ุนุฑุถ ุฅุญุตุงุฆูุงุช ููุตูุฉ (ุนููุฏุ ุนููุงุกุ ุฃุฎุทุงุก)
- ุฑุณุงุฆู ูุฌุงุญ ูุชุญุฐูุฑุงุช ูุญุณูุฉ
- ุนุฑุถ ุฃุฎุทุงุก ูุน ุฃุณูุงุก ุงูุนููุงุก
- ุชุนูููุงุช ูุญุฏุซุฉ ุจุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

## ๐ ุชูุณูู ุงูููู ุงููุทููุจ

### ุงูุญููู ุงููุทููุจุฉ:
```csv
customer_name,vehicle_id,contract_number,contract_type,contract_date,start_date,end_date,contract_amount,monthly_amount,description,terms
```

### ูุซุงู ูู ุงูุจูุงูุงุช ุงููุนููุฉ:
```csv
customer_name,customer_id,customer_phone,vehicle_number,vehicle_id,contract_number,contract_type,contract_date,start_date,end_date,contract_amount,monthly_amount,cost_center_id,cost_center_code,cost_center_name,description,terms
issam abdallah,,+96550123456,7036,,LTO2024139,rent_to_own,2024-04-29,2024-04-29,2024-11-30,75600,2100,,,,"ุนูุฏ ุฅูุฌุงุฑ ููุชูู ุจุงูุชูููู","ููุชุฒู ุงููุณุชุฃุฌุฑ ุจุฏูุน ุงูุฅูุฌุงุฑ ูู ููุนุฏู ุงููุญุฏุฏ"
MEHRAN TABIB TABIB HUSSAIN,,+96555555555,749762,,LTO20249,rent_to_own,2023-11-26,2023-11-26,2026-11-26,0,0,,,,"ุนูุฏ ุฅูุฌุงุฑ ููุชูู ุจุงูุชูููู - ูุดุท","ููุชุฒู ุงููุณุชุฃุฌุฑ ุจุฏูุน ุงูุฅูุฌุงุฑ ูู ููุนุฏู ุงููุญุฏุฏ"
AHMED BEN DHAOU,,+96566666666,7071,,LTO2024153,rent_to_own,2024-03-12,2024-03-12,2027-06-01,0,0,,,,"cancelled - ุนูุฏ ููุบู","ุชู ุงูุฅูุบุงุก ูุจู ุงูุชูุนูู"
```

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุชุญุถูุฑ ุงูููู
- ุงุณุชุฎุฏู ุงููุงูุจ ุงููุญุฏุซ ูู ุงููุธุงู
- ุชุฃูุฏ ูู ุตูุบุฉ CSV ูุน ุชุฑููุฒ UTF-8
- ุงููุฃ ุงูุญููู ุงููุทููุจุฉ ุนูู ุงูุฃูู

### 2. ุฑูุน ุงูููู
1. ุงุถุบุท ุนูู "ุฑูุน CSV" ูู ุตูุญุฉ ุงูุนููุฏ
2. ุงุฎุชุฑ ุงูููู ุงููุญุถุฑ
3. ุฑุงูุจ ุดุฑูุท ุงูุชูุฏู
4. ุฑุงุฌุน ุงููุชุงุฆุฌ ูุงูุฅุญุตุงุฆูุงุช

### 3. ูุฑุงุฌุนุฉ ุงููุชุงุฆุฌ
- **ุนููุฏ ูููุดุฃุฉ**: ุนุฏุฏ ุงูุนููุฏ ุงูุชู ุชู ุฅูุดุงุคูุง ุจูุฌุงุญ
- **ุนููุงุก ุฌุฏุฏ**: ุนุฏุฏ ุงูุนููุงุก ุงูุฐูู ุชู ุฅูุดุงุคูู ุชููุงุฆูุงู
- **ุฃุฎุทุงุก**: ูุงุฆูุฉ ุจุงูุฃุฎุทุงุก ูุน ุฃุณูุงุก ุงูุนููุงุก
- **ุชุญุฐูุฑุงุช**: ุชูุจููุงุช ุญูู ูุดุงูู ุบูุฑ ุญุฑุฌุฉ

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุญุณูุฉ

### ุฅุญุตุงุฆูุงุช ูุฑุฆูุฉ
```
โโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโ
โ ุนููุฏ ูููุดุฃุฉ โ  ุนููุงุก ุฌุฏุฏ  โ   ุฃุฎุทุงุก     โ ุฅุฌูุงูู ุงูุตููู โ
โ     15      โ      3      โ      2      โ     17      โ
โโโโโโโโโโโโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโโโดโโโโโโโโโโโโโโ
```

### ุฑุณุงุฆู ุงููุฌุงุญ
```
โ ุชู ุจูุฌุงุญ! ุชู ุฅูุดุงุก 15 ุนูุฏ ูุน ุฅูุดุงุก 3 ุนููู ุฌุฏูุฏ.
```

### ุนุฑุถ ุงูุฃุฎุทุงุก
```
โ ุฃุฎุทุงุก (2):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุตู 5 | issam abdallah                            โ
โ ุชุนุฐุฑ ุชุญุฏูุฏ ุงููุฑูุจุฉ ูู ุงููููุฉ '7036'                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ ุงูุตู 8 | AHMED BEN DHAOU                           โ
โ ุชุงุฑูุฎ ููุงูุฉ ุงูุนูุฏ ูุฌุจ ุฃู ูููู ุจุนุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ ููุทู ุฅูุดุงุก ุงูุนููุงุก

### ุชุญุฏูุฏ ููุน ุงูุนููู
```typescript
const isCompany = customerName.includes('ุดุฑูุฉ') || 
                 customerName.includes('ูุคุณุณุฉ') || 
                 customerName.includes('Company') || 
                 customerName.includes('Corp') ||
                 customerName.toUpperCase() === customerName
```

### ุจูุงูุงุช ุงูุนููู ุงูุงูุชุฑุงุถูุฉ
```typescript
// ููุฃูุฑุงุฏ
{
  customer_type: 'individual',
  first_name: 'ุงูุงุณู ุงูุฃูู',
  last_name: 'ุจุงูู ุงูุงุณู',
  first_name_ar: 'ุงูุงุณู ุงูุฃูู',
  last_name_ar: 'ุจุงูู ุงูุงุณู'
}

// ููุดุฑูุงุช
{
  customer_type: 'corporate',
  company_name: 'ุงุณู ุงูุดุฑูุฉ',
  company_name_ar: 'ุงุณู ุงูุดุฑูุฉ'
}
```

## ๐ ุชุญุณููุงุช ุงูุฃุฏุงุก

### 1. ุงูุชุฎุฒูู ุงููุคูุช (Caching)
- ูุงุด ููุนููุงุก ุงููุจุญูุซ ุนููู
- ูุงุด ูููุฑูุจุงุช
- ูุงุด ููุฑุงูุฒ ุงูุชูููุฉ

### 2. ุงูุจุญุซ ุงููุญุณู
- ุจุญุซ ุฏููู ุฃููุงู ุซู ุฌุฒุฆู
- ุชุญุฏูุฏ ุนุฏุฏ ุงููุชุงุฆุฌ ูุชุฌูุจ ุงูุฅูุฑุงุท
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจููุงุกุฉ

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ
- ุชุชุจุน ุงุณู ุงูุนููู ูุน ูู ุฎุทุฃ
- ุชูุงุฑูุฑ ูุงุจูุฉ ููุชุญููู

## ๐จ ูุนุงูุฌุฉ ุงูุญุงูุงุช ุงูุฎุงุตุฉ

### 1. ุงูุนููุฏ ุงูููุบูุฉ
```typescript
// ุฅุฐุง ุงุญุชูู ุงููุตู ุนูู "cancelled" ุฃู "ููุบู"
status: isCancelledDescription(description) ? 'cancelled' : 'draft'
```

### 2. ุงููุจุงูุบ ุงูุตูุฑูุฉ
- ููุณูุญ ุจุงููุจุงูุบ ุงูุตูุฑูุฉ
- ูุชู ุญุณุงุจ ุงููุณุท ุงูุดูุฑู ุชููุงุฆูุงู
- ุชุญุฐูุฑุงุช ูููุจุงูุบ ุบูุฑ ุงูููุทููุฉ

### 3. ุงูุชูุงุฑูุฎ ุงูููููุฏุฉ
- ุชูููุฉ ุชููุงุฆูุฉ ููุชูุงุฑูุฎ ุญุณุจ ููุน ุงูุนูุฏ
- ุชุญูู ูู ููุทููุฉ ุงูุชูุงุฑูุฎ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููุชูุงุฑูุฎ ุงูุฎุงุทุฆุฉ

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุนููู ุฌุฏูุฏ ูุน ุนูุฏ
```csv
customer_name,contract_number,contract_type,start_date,end_date,contract_amount
"ุดุฑูุฉ ุงูุฎููุฌ ุงูุฌุฏูุฏุฉ",CON-2025-001,monthly_rental,2025-01-01,2025-12-31,12000
```

**ุงููุชูุฌุฉ:**
- โ ุชู ุฅูุดุงุก ุนููู ุฌุฏูุฏ: "ุดุฑูุฉ ุงูุฎููุฌ ุงูุฌุฏูุฏุฉ" (ููุน: ุดุฑูุฉ)
- โ ุชู ุฅูุดุงุก ุนูุฏ: CON-2025-001

### ูุซุงู 2: ุนููู ููุฌูุฏ ูุน ูุฑูุจุฉ
```csv
customer_name,vehicle_number,contract_number,contract_type,start_date,end_date,contract_amount
"ุฃุญูุฏ ูุญูุฏ",KWT-1234,CON-2025-002,rent_to_own,2025-01-01,2027-01-01,50000
```

**ุงููุชูุฌุฉ:**
- โ ุชู ุงูุนุซูุฑ ุนูู ุงูุนููู ุงูููุฌูุฏ: "ุฃุญูุฏ ูุญูุฏ"
- โ ุชู ุฑุจุท ุงููุฑูุจุฉ: KWT-1234
- โ ุชู ุฅูุดุงุก ุนูุฏ: CON-2025-002

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุญููููุง

| ุงูุฎุทุฃ | ุงูุณุจุจ | ุงูุญู |
|-------|--------|------|
| `ุงุณู ุงูุนููู ูุงุฑุบ` | ุนููุฏ customer_name ูุงุฑุบ | ุชุฃูุฏ ูู ููุก ุงุณู ุงูุนููู |
| `ุชุงุฑูุฎ ููุงูุฉ ุงูุนูุฏ ูุฌุจ ุฃู ูููู ุจุนุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ` | ุชูุงุฑูุฎ ุฎุงุทุฆุฉ | ุฑุงุฌุน ุงูุชูุงุฑูุฎ ูู ุงูููู |
| `ูู ูุชู ุงูุนุซูุฑ ุนูู ูุฑูุจุฉ ุจุงูุฑูู` | ุฑูู ููุญุฉ ุบูุฑ ููุฌูุฏ | ุชุฃูุฏ ูู ุฑูู ุงูููุญุฉ ุฃู ุงุชุฑูู ูุงุฑุบุงู |
| `ููุน ุงูุนูุฏ ูุฌุจ ุฃู ูููู ุฃุญุฏ ุงูููู ุงูุชุงููุฉ` | ููุน ุนูุฏ ุบูุฑ ุตุญูุญ | ุงุณุชุฎุฏู ุงูุฃููุงุน ุงููุญุฏุฏุฉ |

## ๐ ุชูุงุฑูุฑ ุงูุฃุฎุทุงุก

### ุชุญููู ุชูุฑูุฑ ุงูุฃุฎุทุงุก
ูููู ุชุญููู ุชูุฑูุฑ CSV ูุญุชูู ุนูู:
- ุฑูู ุงูุตู
- ุงุณู ุงูุนููู
- ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูุชูุตูููุฉ

### ุชูุณูู ุงูุชูุฑูุฑ
```csv
ุงูุตู,ุงุณู ุงูุนููู,ุฑุณุงูุฉ ุงูุฎุทุฃ
5,"issam abdallah","ุชุนุฐุฑ ุชุญุฏูุฏ ุงููุฑูุจุฉ ูู ุงููููุฉ '7036'"
8,"AHMED BEN DHAOU","ุชุงุฑูุฎ ููุงูุฉ ุงูุนูุฏ ูุฌุจ ุฃู ูููู ุจุนุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ"
```

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุชุญุณููุงุช ูุณุชูุจููุฉ
1. **ุฏุนู ูููุงุช Excel** (.xlsx)
2. **ูุนุงููุฉ ูุจู ุงูุฑูุน** ูุน ุฅููุงููุฉ ุงูุชุนุฏูู
3. **ุฑุจุท ุชููุงุฆู ุจุงูููุงุชูุฑ** ูุงููุฏููุนุงุช
4. **ุฅุดุนุงุฑุงุช ุจุฑูุฏ ุฅููุชุฑููู** ููุนููุฏ ุงูุฌุฏูุฏุฉ
5. **ุชุตุฏูุฑ ุงูุนููุฏ** ุจุตูุบ ูุชุนุฏุฏุฉ

### ุชุญุณููุงุช ุงูุฃุฏุงุก
1. **ูุนุงูุฌุฉ ูุชูุงุฒูุฉ** ูููููุงุช ุงููุจูุฑุฉ
2. **ุถุบุท ุงูุจูุงูุงุช** ูุชุณุฑูุน ุงูููู
3. **ุชุญุณูู ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช**

---

## ๐ ุงูุฏุนู

ููุญุตูู ุนูู ุงููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงูู:
- ุฑุงุฌุน ูุฐุง ุงูุฏููู ุฃููุงู
- ุชุญูู ูู ุฑุณุงุฆู ุงูุฃุฎุทุงุก ูู ุงููุธุงู
- ุญูู ุชูุฑูุฑ ุงูุฃุฎุทุงุก ูููุฑุงุฌุนุฉ ุงูุชูุตูููุฉ

**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ:** ููุงูุฑ 2025  
**ุงูุฅุตุฏุงุฑ:** 2.0  
**ุงููุทูุฑ:** Fleetify Team
